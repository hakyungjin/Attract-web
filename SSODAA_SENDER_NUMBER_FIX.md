# 🔧 쏘다 SMS "회신번호 차단(개인)" 오류 해결 가이드

## ⚠️ 오류 메시지

```
"회신번호 차단(개인)"
```

또는

```
SMS 발송은 성공했지만 실제로는 실패
```

## 🔍 원인

발신번호가 **개인 번호**로 등록되어 있어서 SMS 발송이 차단되었습니다.

쏘다 SMS API에서는:
- ❌ 개인 번호로는 SMS 발송 불가
- ✅ 사업자 등록 번호만 사용 가능
- ✅ 승인된 발신번호만 사용 가능

---

## ✅ 해결 방법

### 방법 1: 발신번호를 사업자 번호로 재등록 (권장)

1. **쏘다 웹사이트 접속**
   - https://ssodaa.com 로그인

2. **발신번호 관리 페이지로 이동**
   - **[문자 서비스]** → **[발신번호 관리]** 메뉴 클릭
   - 또는 직접: https://ssodaa.com/service/sms/sendphone

3. **기존 발신번호 확인**
   - 현재 등록된 발신번호의 상태 확인
   - "개인" 또는 "미승인" 상태인지 확인

4. **발신번호 삭제 후 재등록**
   - 기존 발신번호 삭제 (있는 경우)
   - **발신번호 추가** 버튼 클릭
   - **서류 인증** 선택 (사업자 등록증 등)
   - 또는 **휴대전화 본인인증** 후 사업자 번호로 변경 요청

5. **사업자 번호 등록**
   - 사업자 등록증 또는 사업자 번호 제출
   - 승인 대기 (보통 1-2일 소요)

---

### 방법 2: 쏘다에서 제공하는 발신번호 사용

일부 SMS 서비스에서는 제공하는 발신번호를 사용할 수 있습니다.

1. **쏘다 고객센터 문의**
   - https://ssodaa.com/customer/inquiry
   - "사업자 발신번호 발급 요청" 문의

2. **문의 내용**
   ```
   안녕하세요.
   
   SMS 발송 시 "회신번호 차단(개인)" 오류가 발생합니다.
   
   현재 개인 번호로 등록되어 있어서 발송이 차단되는 것 같습니다.
   사업자 발신번호를 발급받거나, 
   개인 번호를 사업자 번호로 변경할 수 있을까요?
   
   감사합니다.
   ```

---

### 방법 3: 다른 발신번호 등록

이미 승인된 다른 발신번호가 있다면:

1. **쏘다 대시보드에서 승인된 발신번호 확인**
   - **[발신번호 관리]** 페이지에서 승인 상태 확인
   - "승인" 또는 "사업자" 상태인 발신번호 찾기

2. **환경 변수 업데이트**
   - Firebase Functions 환경 변수에서 `SSODAA_SENDER` 값 변경
   - 승인된 발신번호로 변경

3. **Functions 재배포**
   ```powershell
   cd functions
   npm run build
   firebase deploy --only functions --project attract--web
   ```

---

## 🔍 발신번호 상태 확인 방법

### 쏘다 대시보드에서 확인

1. https://ssodaa.com 로그인
2. **[문자 서비스]** → **[발신번호 관리]**
3. 발신번호 목록에서 상태 확인:
   - ✅ **승인**: 정상 사용 가능
   - ⚠️ **대기**: 승인 대기 중
   - ❌ **거부** 또는 **개인**: 사용 불가

### API로 확인

```typescript
// 발신번호 목록 조회 API
const response = await axios.get(
  'https://apis.ssodaa.com/sms/sendphone/list',
  {
    headers: {
      'x-api-key': API_KEY,
      'Content-Type': 'application/json',
    },
    params: {
      token_key: TOKEN_KEY,
    },
  }
);
```

---

## 📝 체크리스트

- [ ] 쏘다 대시보드에서 발신번호 상태 확인
- [ ] 발신번호가 "개인" 또는 "미승인" 상태인지 확인
- [ ] 사업자 등록증 또는 서류 준비
- [ ] 발신번호 재등록 (사업자 번호로)
- [ ] 승인 대기 (1-2일)
- [ ] 승인 확인 후 SMS 발송 테스트

---

## ⚠️ 주의사항

1. **개인 번호는 사용 불가**
   - 쏘다 SMS API는 개인 번호로 SMS 발송을 허용하지 않습니다
   - 반드시 사업자 등록 번호가 필요합니다

2. **승인 시간**
   - 발신번호 등록 후 승인까지 1-2일 소요될 수 있습니다
   - 급한 경우 쏘다 고객센터에 문의하세요

3. **환경 변수 업데이트**
   - 발신번호가 변경되면 Firebase Functions 환경 변수도 업데이트해야 합니다

---

## 🚀 빠른 해결

**지금 바로 할 일**:

1. https://ssodaa.com 로그인
2. **[발신번호 관리]** 페이지로 이동
3. 현재 발신번호 상태 확인
4. "개인" 또는 "미승인"이면 사업자 번호로 재등록
5. 승인 대기 후 테스트

---

## 📞 추가 도움

문제가 계속되면:
- 쏘다 고객센터: https://ssodaa.com/customer/inquiry
- 쏘다 API 문서: https://ssodaa.com/service/api/smsapi

