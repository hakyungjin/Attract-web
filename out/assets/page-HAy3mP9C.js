import{u as e,j as s,l as t,f as a}from"./index-0bpRGtBK.js";import{u as l,b as i,r}from"./vendor-DiTsd9F_.js";import{a as n,b as c}from"./ssodaaSmsService-DF4U11Tl.js";import{g as o}from"./avatarUtils-Jlyh85v5.js";import"./supabase-F6L96wRu.js";const d=async(e,s)=>{try{return{success:!0,result:{message:"Push notification queued"}}}catch(t){return{success:!1,error:t}}},m={INTJ:{ENFP:95,ENTP:90,INFJ:85,INFP:85,ENTJ:80,INTP:80,ENFJ:75,ISTJ:70,ISFJ:65,ESTJ:65,ESFJ:60,ISTP:60,ISFP:55,ESTP:55,ESFP:50,INTJ:75},INTP:{ENTJ:95,ENFJ:90,INTJ:85,INFJ:85,ENTP:80,INFP:75,ENFP:70,ISTJ:65,ISTP:65,ESTJ:60,ISFJ:60,ESTP:55,ESFJ:55,ISFP:50,ESFP:50,INTP:75},ENTJ:{INTP:95,INFP:90,INTJ:85,ENFP:85,ENTP:80,INFJ:75,ENFJ:70,ISTP:65,ISTJ:65,ESTP:60,ESTJ:60,ISFP:55,ISFJ:55,ESFP:50,ESFJ:50,ENTJ:70},ENTP:{INFJ:95,INTJ:90,ENFP:85,INFP:85,ENTJ:80,INTP:80,ENFJ:75,ISFJ:70,ISTJ:65,ESFJ:65,ESTJ:60,ISFP:60,ISTP:55,ESFP:55,ESTP:50,ENTP:75},INFJ:{ENTP:95,ENFP:90,INFP:85,INTJ:85,ENFJ:80,INTP:80,ENTJ:75,ISFP:70,ISTP:65,ESFP:65,ESTP:60,ISFJ:60,ISTJ:55,ESFJ:55,ESTJ:50,INFJ:75},INFP:{ENFJ:95,ENTJ:90,INFJ:85,ENFP:85,ENTP:80,INTJ:75,INTP:75,ISFJ:70,ESFJ:65,ISTJ:65,ESTJ:60,ISFP:60,ISTP:55,ESFP:55,ESTP:50,INFP:75},ENFJ:{INFP:95,INTP:90,ENFP:85,INFJ:85,ENTJ:75,ENTP:75,ISFP:70,ISFJ:70,ESFJ:65,ISTJ:65,ESTJ:60,ISTP:60,ESFP:55,ESTP:55,INTJ:70,ENFJ:75},ENFP:{INTJ:95,INFJ:90,ENFJ:85,INFP:85,ENTP:80,ENTJ:80,INTP:75,ESFJ:70,ISFJ:70,ESFP:65,ISFP:65,ESTJ:60,ISTJ:60,ESTP:55,ISTP:55,ENFP:75},ISTJ:{ESFP:85,ESTP:80,ISFP:75,ISTP:75,ESTJ:75,ISFJ:70,ESFJ:70,INTJ:65,ENTJ:65,ENTP:60,INTP:60,ENFP:55,INFP:55,ENFJ:55,INFJ:50,ISTJ:70},ISFJ:{ESFP:90,ESTP:85,ENFP:80,ENTP:75,INFP:75,ESFJ:75,ISFP:70,ESTJ:70,ISTJ:70,ISTP:65,ENFJ:65,INFJ:60,ENTJ:55,INTJ:55,INTP:55,ISFJ:70},ESTJ:{ISFP:85,ISTP:80,ESFP:75,ESTP:75,ISTJ:75,ESFJ:70,ISFJ:70,ENTJ:65,INTJ:65,INTP:60,ENTP:60,INFP:55,ENFP:55,INFJ:55,ENFJ:50,ESTJ:70},ESFJ:{ISFP:90,ISTP:85,INFP:80,ENFP:75,INTP:75,ESFP:75,ISTJ:70,ESTJ:70,ISFJ:70,ESTP:65,INFJ:65,ENFJ:60,INTJ:55,ENTJ:55,ENTP:55,ESFJ:70},ISTP:{ESFJ:85,ESTJ:80,ISFJ:75,ISTJ:75,ESTP:75,ESFP:70,ISFP:70,ENTJ:65,ENTP:60,INTJ:60,INTP:60,ENFJ:55,INFJ:55,ENFP:55,INFP:50,ISTP:70},ISFP:{ENFJ:90,ESFJ:90,INFJ:85,ESTJ:80,ENTJ:75,ISTJ:75,ESFP:75,ISFJ:70,ESTP:70,ISTP:70,ENTP:65,INFP:65,ENFP:60,INTJ:55,INTP:50,ISFP:70},ESTP:{ISFJ:85,ISTJ:80,ESFJ:75,ESTJ:75,ISTP:75,ISFP:70,ESFP:70,ENTP:60,INTP:60,ENTJ:60,INTJ:55,INFP:55,ENFP:55,INFJ:55,ENFJ:50,ESTP:70},ESFP:{ISFJ:90,ISTJ:85,ESFJ:80,ENFJ:75,ESTJ:75,INFJ:75,ISFP:75,ESTP:70,ISTP:70,ENFP:65,INFP:65,ENTP:60,INTP:55,ENTJ:50,INTJ:50,ESFP:70}},x={INTJ:{name:"ì „ëµê°€",description:"ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ì „ëµì ì¸ ì‚¬ê³ ë¥¼ í•˜ëŠ” ê³„íšê°€"},INTP:{name:"ë…¼ë¦¬ìˆ ì‚¬",description:"í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¥¼ ê°€ì§„ ì§€ì  íƒêµ¬ì"},ENTJ:{name:"í†µì†”ì",description:"ëŒ€ë‹´í•˜ê³  ìƒìƒë ¥ì´ í’ë¶€í•œ ê°•ë ¥í•œ ì§€ë„ì"},ENTP:{name:"ë³€ë¡ ê°€",description:"ì§€ì  ë„ì „ì„ ì¦ê¸°ëŠ” ì˜ë¦¬í•œ ì•…ë§ˆì˜ ëŒ€ë³€ì¸"},INFJ:{name:"ì˜¹í˜¸ì",description:"ì´ìƒì£¼ì˜ì ì´ê³  ì›ì¹™ì£¼ì˜ì ì¸ ì„ ì˜ì˜ í™œë™ê°€"},INFP:{name:"ì¤‘ì¬ì",description:"ì´íƒ€ì ì´ê³  í•­ìƒ ì„ í•œ ë™ê¸°ë¡œ í–‰ë™í•˜ëŠ” ì‚¬ëŒ"},ENFJ:{name:"ì„ ë„ì",description:"ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ì˜ê°ì„ ì£¼ëŠ” ì§€ë„ì"},ENFP:{name:"í™œë™ê°€",description:"ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ììœ ë¡œìš´ ì˜í˜¼"},ISTJ:{name:"í˜„ì‹¤ì£¼ì˜ì",description:"ì‹¤ìš©ì ì´ê³  ì‚¬ì‹¤ì— ê¸°ë°˜í•œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒ"},ISFJ:{name:"ìˆ˜í˜¸ì",description:"í—Œì‹ ì ì´ê³  ë”°ëœ»í•œ ìˆ˜í˜¸ì"},ESTJ:{name:"ê²½ì˜ì",description:"ì§ˆì„œë¥¼ ì¤‘ì‹œí•˜ëŠ” í›Œë¥­í•œ ê´€ë¦¬ì"},ESFJ:{name:"ì§‘ì •ê´€",description:"ë°°ë ¤ì‹¬ì´ ë§ê³  ì‚¬êµì ì¸ í˜‘ë ¥ì"},ISTP:{name:"ì¥ì¸",description:"ëŒ€ë‹´í•˜ê³  ì‹¤ìš©ì ì¸ íƒí—˜ê°€"},ISFP:{name:"ëª¨í—˜ê°€",description:"ìœ ì—°í•˜ê³  ë§¤ë ¥ì ì¸ ì˜ˆìˆ ê°€"},ESTP:{name:"ì‚¬ì—…ê°€",description:"ì˜ë¦¬í•˜ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ëª¨í—˜ì„ ì¦ê¸°ëŠ” ì‚¬ëŒ"},ESFP:{name:"ì—°ì˜ˆì¸",description:"ì¦‰í¥ì ì´ê³  ì—´ì •ì ì¸ ì¦ê±°ì›€ì„ ì¶”êµ¬í•˜ëŠ” ì‚¬ëŒ"}},h={excellent:{title:"í™˜ìƒì˜ ê¶í•©",emoji:"ğŸ’–",color:"#ec4899"},good:{title:"ì¢‹ì€ ê¶í•©",emoji:"ğŸ’•",color:"#f472b6"},average:{title:"í‰ë²”í•œ ê¶í•©",emoji:"ğŸ’›",color:"#fbbf24"},challenging:{title:"ë…¸ë ¥ì´ í•„ìš”í•œ ê¶í•©",emoji:"ğŸ’™",color:"#60a5fa"}};function u(e,s){const t=e.toUpperCase(),a=s.toUpperCase();if(!m[t]||!m[a])return{score:50,level:"average",title:"ì•Œ ìˆ˜ ì—†ëŠ” ê¶í•©",description:"MBTI ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.",strengths:["ì„œë¡œë¥¼ ì•Œì•„ê°€ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤"],challenges:["MBTIë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”"],advice:"MBTI ê²€ì‚¬ë¥¼ í†µí•´ ì •í™•í•œ ìœ í˜•ì„ í™•ì¸í•˜ì„¸ìš”."};const l=m[t][a]||50;let i;i=l>=85?"excellent":l>=70?"good":l>=55?"average":"challenging";const r=((e,s,t)=>{let a;a=t>=85?"excellent":t>=70?"good":t>=55?"average":"challenging";const l={excellent:{strengths:["ì„œë¡œì˜ ë‹¤ë¥¸ ì ì´ ì™„ë²½í•˜ê²Œ ë³´ì™„ë©ë‹ˆë‹¤","ê¹Šì€ ì´í•´ì™€ ê³µê°ëŒ€ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤","í•¨ê»˜ ì„±ì¥í•˜ë©° ë°œì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤","ìì—°ìŠ¤ëŸ¬ìš´ ì¼€ë¯¸ìŠ¤íŠ¸ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤"],challenges:["ë„ˆë¬´ ë¹„ìŠ·í•´ì„œ ê°€ë” ì§€ë£¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì˜ ì•½ì ì„ ë³´ì™„í•˜ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤"],advice:"ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¡´ì¤‘í•˜ë©°, í•¨ê»˜ ì„±ì¥í•˜ëŠ” ë° ì§‘ì¤‘í•˜ì„¸ìš”. í›Œë¥­í•œ íŒŒíŠ¸ë„ˆì‹­ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!"},good:{strengths:["ì„œë¡œë¥¼ ì¡´ì¤‘í•˜ê³  ì´í•´í•©ë‹ˆë‹¤","ê±´ê°•í•œ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì—ê²Œ ê¸ì •ì ì¸ ì˜í–¥ì„ ì¤ë‹ˆë‹¤"],challenges:["ê°€ì¹˜ê´€ ì°¨ì´ë¡œ ì¸í•œ ì˜ê²¬ ì¶©ëŒì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì˜ ì†Œí†µ ë°©ì‹ì„ ì´í•´í•˜ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤","ë•Œë•Œë¡œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤"],advice:"ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ì†Œí†µí•˜ê³ , ì„œë¡œì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ë ¤ ë…¸ë ¥í•˜ì„¸ìš”. ì¢‹ì€ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."},average:{strengths:["ì„œë¡œì—ê²Œì„œ ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ë‹¤ì–‘í•œ ê´€ì ì„ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤"],challenges:["ì„±ê²© ì°¨ì´ë¡œ ì¸í•œ ê°ˆë“±ì´ ìì£¼ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œë¥¼ ì´í•´í•˜ëŠ” ë° ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤","ì†Œí†µì— ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤","ê°€ì¹˜ê´€ ì°¨ì´ë¥¼ ì¡°ìœ¨í•´ì•¼ í•©ë‹ˆë‹¤"],advice:"ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ì„œë¡œë¥¼ ì´í•´í•˜ë ¤ ë…¸ë ¥í•˜ì„¸ìš”. ì‹œê°„ê³¼ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ ì¢‹ì€ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."},challenging:{strengths:["ì„œë¡œì—ê²Œ ìƒˆë¡œìš´ ì‹œê°ì„ ì œê³µí•©ë‹ˆë‹¤","ë‹¤ì–‘ì„±ì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"],challenges:["ê·¼ë³¸ì ì¸ ê°€ì¹˜ê´€ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤","ì†Œí†µì´ ë§¤ìš° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì˜ í–‰ë™ì„ ì´í•´í•˜ê¸° í˜ë“­ë‹ˆë‹¤","ë§ì€ íƒ€í˜‘ê³¼ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤","ê°ˆë“±ì´ ìì£¼ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"],advice:"ì„œë¡œì˜ ê·¼ë³¸ì ì¸ ì°¨ì´ë¥¼ ì¸ì •í•˜ê³ , ì¡´ì¤‘í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê´€ê³„ ìœ ì§€ì— ìƒë‹¹í•œ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤."}}[a],i=x[e],r=x[s];return{title:h[a].title,description:`${i.name}(${e})ì™€ ${r.name}(${s})ì˜ ì¡°í•©ì…ë‹ˆë‹¤.`,strengths:l.strengths,challenges:l.challenges,advice:l.advice}})(t,a,l);return{score:l,level:i,...r}}function N(e){return h[e].color}function b(){const m=l(),x=i(),{user:b}=e(),p=x.state?.profile||x.state?.authorData,[f,g]=r.useState(!1),[j,S]=r.useState(!1),[I,T]=r.useState(!1),[E,P]=r.useState(!1),[J,F]=r.useState(0),[v,w]=r.useState(0),[y,k]=r.useState(!1),[_,$]=r.useState(null),[C,q]=r.useState(null),[z,B]=r.useState(!1),M=50;r.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);const U=(()=>{const e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e).id}catch{return null}})(),D=U&&p?.id===U;r.useEffect(()=>{b||U||T(!0)},[b,U]),r.useEffect(()=>{(async()=>{if(!b?.id)return;const{data:e}=await supabase.from("users").select("coins, mbti").eq("id",b.id).single();e&&(F(e.coins||0),$(e.mbti||null))})()},[b?.id]);const O=(()=>{const e=[];return p?.profile_image&&e.push(p.profile_image),p?.photos&&Array.isArray(p.photos)&&p.photos.forEach(s=>{s&&!e.includes(s)&&e.push(s)}),0===e.length?[o(p?.gender||"")]:e})();if(!p)return m(-1),null;const A={school:p?.school||"",height:p?.height||"",bodyType:p?.bodyType||p?.body_type||"",style:p?.style||"",religion:p?.religion||"",mbti:p?.mbti||"",smoking:p?.smoking||"",drinking:p?.drinking||""},G=p?.interests||[],H=()=>{if(!_)return void alert("ë‚´ MBTI ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œí•„ì„ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”.");if(!p?.mbti)return void alert("ìƒëŒ€ë°©ì˜ MBTI ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");const e=u(_,p.mbti);q(e),k(!0)},K="female"===p?.gender||"ì—¬ì"===p?.gender,L=K?"from-rose-500 via-pink-500 to-fuchsia-500":"from-cyan-500 via-blue-500 to-indigo-500",Q=K?"rose":"cyan";return s.jsxs("div",{className:"min-h-screen bg-slate-50 "+(I?"overflow-hidden":""),children:[s.jsxs("div",{className:""+(I?"blur-sm pointer-events-none":""),children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-4",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},children:[s.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),m(-1)},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:s.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),s.jsx("button",{onClick:()=>{window.confirm("ì´ ì‚¬ìš©ìë¥¼ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&alert("ì‹ ê³  ê¸°ëŠ¥ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.")},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:s.jsx("i",{className:"ri-more-2-fill text-white text-xl"})})]}),s.jsxs("div",{className:"relative w-full aspect-[3/4] max-h-[85vh] bg-slate-200 overflow-hidden",children:[s.jsx("img",{src:O[v],alt:`${p.name}`,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),s.jsx("button",{onClick:()=>{w(e=>0===e?O.length-1:e-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:s.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),s.jsx("button",{onClick:()=>{w(e=>e===O.length-1?0:e+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:s.jsx("i",{className:"ri-arrow-right-s-line text-white text-2xl"})}),O.length>1&&s.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 flex space-x-2 z-10",children:O.map((e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),w(t)},className:"w-2 h-2 rounded-full transition-all cursor-pointer shadow-sm "+(t===v?"bg-white w-4":"bg-white/50 hover:bg-white/80")},t))}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-10",children:s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-1 drop-shadow-lg",children:[p.name,", ",p.age||"??"]}),s.jsxs("div",{className:"flex items-center space-x-3 text-white/90",children:[p.location&&s.jsxs("span",{className:"flex items-center text-sm",children:[s.jsx("i",{className:"ri-map-pin-line mr-1"}),p.location]}),"ë¹„ê³µê°œ"!==A.school&&s.jsxs("span",{className:"flex items-center text-sm",children:[s.jsx("i",{className:"ri-graduation-cap-line mr-1"}),A.school]})]})]}),"ë¹„ê³µê°œ"!==A.mbti&&s.jsx("button",{onClick:H,className:`bg-gradient-to-r ${L} px-4 py-2 rounded-full shadow-lg hover:scale-105 transition-transform cursor-pointer`,children:s.jsx("span",{className:"text-white font-bold text-sm",children:A.mbti})})]})})]})]}),s.jsxs("div",{className:"px-4 py-6 space-y-4 pb-6",children:[p?.bio&&s.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:s.jsxs("p",{className:"text-slate-700 text-lg leading-relaxed whitespace-pre-wrap",children:['"',p.bio,'"']})}),s.jsxs("button",{onClick:H,className:`w-full bg-gradient-to-r ${L} rounded-3xl p-5 shadow-xl flex items-center justify-between hover:shadow-2xl hover:scale-[1.02] transition-all cursor-pointer group`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:"ğŸ’•"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"font-bold text-white text-lg block",children:"ìš°ë¦¬ì˜ ê¶í•©ì€?"}),s.jsxs("span",{className:"text-white/80 text-sm",children:[_||"?"," Ã— ",p?.mbti||"?"," ê¶í•© í™•ì¸í•˜ê¸°"]})]})]}),s.jsx("i",{className:"ri-arrow-right-s-line text-3xl text-white/80 group-hover:translate-x-1 transition-transform"})]}),G.length>0&&s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[s.jsx("i",{className:`ri-heart-3-line mr-2 text-${Q}-500`}),"ê´€ì‹¬ì‚¬"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:G.map((e,t)=>s.jsx("span",{className:`bg-${Q}-50 text-${Q}-600 px-4 py-2.5 rounded-full text-sm font-medium border border-${Q}-100`,children:e},t))})]}),s.jsx("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm",children:s.jsx("div",{className:"grid grid-cols-2",children:[{icon:"ri-ruler-line",label:"í‚¤",value:A.height},{icon:"ri-body-scan-line",label:"ì²´í˜•",value:A.bodyType},{icon:"ri-t-shirt-line",label:"ìŠ¤íƒ€ì¼",value:A.style},{icon:"ri-moon-line",label:"ì¢…êµ",value:A.religion},{icon:"ri-fire-line",label:"í¡ì—°",value:A.smoking},{icon:"ri-goblet-line",label:"ìŒì£¼",value:A.drinking}].map((e,t)=>s.jsxs("div",{className:`p-4 ${t%2==0?"border-r border-slate-100":""} ${t<4?"border-b border-slate-100":""}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("i",{className:`${e.icon} text-slate-400`}),s.jsx("span",{className:"text-xs text-slate-400",children:e.label})]}),s.jsx("span",{className:"font-semibold "+(e.value?"text-slate-700":"text-slate-300"),children:e.value||"-"})]},t))})}),!D&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("button",{onClick:()=>{b?.id&&p?.id?P(!0):T(!0)},disabled:z,className:`bg-gradient-to-r ${L} rounded-full flex items-center justify-center shadow-2xl hover:shadow-3xl hover:scale-110 transition-all cursor-pointer disabled:opacity-70 ${z?"animate-pulse scale-110":""}`,style:{width:"72px",height:"72px"},children:s.jsx("i",{className:"ri-heart-fill text-white text-4xl "+(z?"animate-bounce":"")})})})]})]}),f&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:s.jsxs("div",{className:`bg-gradient-to-r ${L} text-white px-8 py-5 rounded-3xl shadow-2xl flex items-center space-x-3 animate-bounce`,children:[s.jsx("i",{className:"ri-heart-fill text-2xl"}),s.jsxs("span",{className:"font-bold text-lg",children:[p.name,"ë‹˜ì—ê²Œ í•˜íŠ¸ë¥¼ ë³´ëƒˆì–´ìš”!"]})]})}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center animate-scale-in",children:[s.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${L} rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl`,children:s.jsx("i",{className:"ri-heart-fill text-white text-4xl"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"í•˜íŠ¸ë¥¼ ë³´ë‚¼ê¹Œìš”?"}),s.jsxs("p",{className:"text-slate-600 mb-2",children:[s.jsx("span",{className:"font-bold",children:p.name}),"ë‹˜ì—ê²Œ",s.jsx("br",{}),"ë§ˆìŒì„ ì „í•˜ë ¤ë©´ ìì„ ",s.jsxs("span",{className:`font-bold text-${Q}-500`,children:[M,"ê°œ"]}),"ê°€ í•„ìš”í•´ìš”"]}),s.jsx("div",{className:`bg-${Q}-50 rounded-2xl p-4 mb-4`,children:s.jsxs("p",{className:`text-sm text-${Q}-700 flex items-center justify-center`,children:[s.jsx("i",{className:"ri-refresh-line mr-2"}),"ê±°ì ˆ ì‹œ ìì„ì´ í™˜ë¶ˆë©ë‹ˆë‹¤"]})}),s.jsxs("p",{className:"text-slate-500 mb-6",children:["ë‚´ ìì„: ",s.jsxs("span",{className:"font-bold "+(J<M?"text-red-500":"text-slate-800"),children:[J,"ê°œ"]})]}),J>=M?s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:async()=>{P(!1),B(!0);try{if(!b?.id||!p?.id)return void T(!0);if(J<M)return alert(`ìì„ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ ${J}ê°œ ë³´ìœ  ì¤‘`),void m("/coin-shop");const s=String(b.id),l=String(p.id);t.info("ë§¤ì¹­ ìš”ì²­ ì •ë³´",{fromUserId:s,toUserId:l});const{data:i}=await supabase.from("matching_requests").select("id").eq("from_user_id",l).eq("to_user_id",s).eq("status","pending").limit(1),r=i&&i.length>0,{data:o}=await supabase.from("matching_requests").select("id").eq("from_user_id",s).eq("to_user_id",l).limit(1);if(o&&o.length>0)return alert("ì´ë¯¸ ë§¤ì¹­ ìš”ì²­ì„ ë³´ë‚¸ ìƒëŒ€ì…ë‹ˆë‹¤"),void B(!1);const{error:x}=await supabase.from("users").update({coins:J-M}).eq("id",b.id);if(x)return t.error("ì½”ì¸ ì°¨ê° ì‹¤íŒ¨",x),alert("ìì„ ì°¨ê°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),void B(!1);F(e=>e-M);const{error:h}=await supabase.from("matching_requests").insert({from_user_id:s,to_user_id:l,status:r?"accepted":"pending"}).select();if(h){if("23505"===h.code)return alert("ì´ë¯¸ ë§¤ì¹­ ìš”ì²­ì„ ë³´ë‚¸ ìƒëŒ€ì…ë‹ˆë‹¤"),void B(!1);throw h}if(r){await supabase.from("matching_requests").update({status:"accepted"}).eq("from_user_id",l).eq("to_user_id",s);const{data:i,error:r}=await supabase.from("chat_rooms").insert({user1_id:s,user2_id:l,created_at:(new Date).toISOString()}).select().single();r&&t.error("ì±„íŒ…ë°© ìƒì„± ì‹¤íŒ¨",r),await a.notifications.createNotification({user_id:l,type:"match",message:`${b.name||"ëˆ„êµ°ê°€"}ë‹˜ê³¼ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤!`,content:"ë§¤ì¹­ ì„±ì‚¬! ğŸ’•",read:!1,created_at:(new Date).toISOString()}),await a.notifications.createNotification({user_id:s,type:"match",message:`${p.name}ë‹˜ê³¼ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤!`,content:"ë§¤ì¹­ ì„±ì‚¬! ğŸ’•",read:!1,created_at:(new Date).toISOString()}),await(async()=>d())(0,b.name);try{const{user:e}=await a.users.getUserById(l);e?.phone_number&&await n(e.phone_number,b.name||"ëˆ„êµ°ê°€");const{user:t}=await a.users.getUserById(s);t?.phone_number&&await n(t.phone_number,p.name)}catch(e){t.error("ë§¤ì¹­ ì„±ì‚¬ SMS ë°œì†¡ ì‹¤íŒ¨",e)}B(!1),S(!0)}else{await a.notifications.createNotification({user_id:l,type:"like",message:`${b.name||"ëˆ„êµ°ê°€"}ë‹˜ì´ ë§¤ì¹­ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤`,content:"ìƒˆë¡œìš´ ë§¤ì¹­ ìš”ì²­",read:!1,created_at:(new Date).toISOString()}),await(async()=>d())(0,b.name);try{const{data:e}=await supabase.from("users").select("phone_number").eq("id",l).single();e?.phone_number&&await c(e.phone_number,b.name||"ëˆ„êµ°ê°€")}catch(e){t.error("ë§¤ì¹­ ìš”ì²­ SMS ë°œì†¡ ì‹¤íŒ¨",e)}B(!1),g(!0),setTimeout(()=>{g(!1),m(-1)},2e3)}}catch(s){t.error("ë§¤ì¹­ ìš”ì²­ ì‹¤íŒ¨",s),alert("ë§¤ì¹­ ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+(s?.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜")),B(!1)}},className:`w-full bg-gradient-to-r ${L} text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg`,children:"ğŸ’• í•˜íŠ¸ ë³´ë‚´ê¸°"}),s.jsx("button",{onClick:()=>P(!1),className:"w-full text-slate-500 py-3 font-medium hover:text-slate-700 transition-colors cursor-pointer",children:"ë‹¤ìŒì— í• ê²Œìš”"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx("i",{className:"ri-coin-line text-2xl text-amber-500 mr-2"}),s.jsx("span",{className:"font-bold text-amber-700",children:"ìì„ì´ ë¶€ì¡±í•´ìš”!"})]}),s.jsxs("p",{className:"text-sm text-amber-600 text-center",children:[M-J,"ê°œë§Œ ë” ìˆìœ¼ë©´ í•˜íŠ¸ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆì–´ìš”"]})]}),s.jsxs("button",{onClick:()=>{P(!1),m("/coin-shop")},className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg shadow-amber-500/30 flex items-center justify-center",children:[s.jsx("i",{className:"ri-flashlight-line mr-2 text-xl"}),"ì§€ê¸ˆ ì¶©ì „í•˜ê¸°"]}),s.jsxs("div",{className:"flex items-center justify-center text-xs text-slate-400",children:[s.jsx("i",{className:"ri-gift-line mr-1"}),"ì²« ì¶©ì „ ì‹œ ë³´ë„ˆìŠ¤ ì½”ì¸ ì§€ê¸‰!"]}),s.jsx("button",{onClick:()=>P(!1),className:"w-full text-slate-500 py-2 font-medium hover:text-slate-700 transition-colors cursor-pointer text-sm",children:"ë‹¤ìŒì— í• ê²Œìš”"})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center animate-scale-in",children:[s.jsxs("div",{className:"flex items-center justify-center mb-6",children:[s.jsx("div",{className:"relative",children:s.jsx("img",{src:O[0],alt:p.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-xl"})}),s.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${L} rounded-full flex items-center justify-center -mx-4 z-10 shadow-xl`,children:s.jsx("span",{className:"text-3xl",children:"ğŸ’•"})}),s.jsx("div",{className:"relative",children:s.jsx("img",{src:b?.profile_image||o(""),alt:"ë‚˜",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-xl"})})]}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"ë§¤ì¹­ ì„±ê³µ! ğŸ‰"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:[p.name,"ë‹˜ê³¼ ì„œë¡œ ë§ˆìŒì´ í†µí–ˆì–´ìš”!",s.jsx("br",{}),"ì§€ê¸ˆ ë°”ë¡œ ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>{S(!1);const e=new CustomEvent("openChat",{detail:{userId:p.id,userName:p.name,userAvatar:O[0]||""}});window.dispatchEvent(e),m("/")},className:`w-full bg-gradient-to-r ${L} text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg`,children:"ğŸ’¬ ëŒ€í™” ì‹œì‘í•˜ê¸°"}),s.jsx("button",{onClick:()=>S(!1),className:"w-full text-slate-500 py-3 font-medium hover:text-slate-700 transition-colors cursor-pointer",children:"ë‚˜ì¤‘ì—"})]})]})}),I&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-md"}),s.jsxs("div",{className:"relative bg-white rounded-3xl p-8 max-w-sm w-full mx-4 text-center shadow-2xl animate-scale-in",children:[s.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${L} rounded-full flex items-center justify-center mx-auto mb-6`,children:s.jsx("i",{className:"ri-lock-line text-white text-4xl"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:["í”„ë¡œí•„ì„ í™•ì¸í•˜ê³ ",s.jsx("br",{}),"ë§¤ì¹­ì„ ì‹œì‘í•˜ë ¤ë©´ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”"]}),s.jsx("button",{onClick:()=>m("/login"),className:`w-full bg-gradient-to-r ${L} text-white py-4 rounded-full font-bold hover:opacity-90 transition-all shadow-lg cursor-pointer`,children:"ë¡œê·¸ì¸í•˜ê¸°"})]})]}),y&&C&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full max-h-[85vh] overflow-y-auto animate-scale-in relative",children:[s.jsx("button",{onClick:()=>k(!1),className:"absolute top-4 right-4 w-10 h-10 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center transition-colors cursor-pointer z-10",children:s.jsx("i",{className:"ri-close-line text-xl text-slate-600"})}),s.jsxs("div",{className:"text-center mb-6 pt-2",children:[s.jsx("div",{className:"text-6xl mb-4",children:(R=C.level,h[R].emoji)}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:C.title}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"bg-purple-100 text-purple-600 px-4 py-2 rounded-full font-bold",children:_}),s.jsx("span",{className:"text-2xl",children:"Ã—"}),s.jsx("span",{className:"bg-pink-100 text-pink-600 px-4 py-2 rounded-full font-bold",children:p?.mbti})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-5 mb-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-slate-600 font-medium",children:"ê¶í•© ì ìˆ˜"}),s.jsxs("span",{className:"text-3xl font-bold",style:{color:N(C.level)},children:[C.score,"ì "]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"h-4 rounded-full transition-all duration-1000",style:{width:`${C.score}%`,backgroundColor:N(C.level)}})})]}),s.jsx("p",{className:"text-slate-600 mb-5 bg-slate-50 p-4 rounded-2xl leading-relaxed",children:C.description}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center text-lg",children:[s.jsx("span",{className:"text-green-500 mr-2",children:"ğŸ’š"})," ì´ëŸ° ì ì´ ì¢‹ì•„ìš”"]}),s.jsx("ul",{className:"space-y-2",children:C.strengths.slice(0,3).map((e,t)=>s.jsxs("li",{className:"text-slate-600 flex items-start bg-green-50 p-3 rounded-xl",children:[s.jsx("i",{className:"ri-check-line text-green-500 mr-2 mt-0.5"}),e]},t))})]}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center text-lg",children:[s.jsx("span",{className:"text-amber-500 mr-2",children:"ğŸ’›"})," ì£¼ì˜í•  ì "]}),s.jsx("ul",{className:"space-y-2",children:C.challenges.slice(0,2).map((e,t)=>s.jsxs("li",{className:"text-slate-600 flex items-start bg-amber-50 p-3 rounded-xl",children:[s.jsx("i",{className:"ri-alert-line text-amber-500 mr-2 mt-0.5"}),e]},t))})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-4 mb-5",children:[s.jsxs("h4",{className:"font-bold text-slate-800 mb-2 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"ğŸ’¡"})," ì—°ì•  ê¿€íŒ"]}),s.jsx("p",{className:"text-slate-700",children:C.advice})]}),s.jsx("button",{onClick:()=>k(!1),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg",children:"í™•ì¸"})]})}),s.jsx("style",{children:"\n        @keyframes scale-in {\n          0% { transform: scale(0.9); opacity: 0; }\n          100% { transform: scale(1); opacity: 1; }\n        }\n        .animate-scale-in {\n          animation: scale-in 0.3s ease-out;\n        }\n      "})]});var R}export{b as default};
