import{j as e}from"./index-BQmPUlpM.js";import{d as t,r}from"./vendor-D2kRphhb.js";import"./supabase-XLYZcxPH.js";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e,t,r){return(l=c()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&o(s,r.prototype),s}).apply(null,arguments)}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,i(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)},a(e)}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){var t=c();return function(){var r,n=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return u(this,r)}}var m=null;function x(e){return window[e]}var f=function(){s(t,a(Error));var e=d(t);function t(r){var s;return n(this,t),(s=e.call(this,"[TossPayments SDK] ".concat(r," is not available"))).name="NamespaceNotAvailableError",s}return t}(),p=function(){s(t,a(Error));var e=d(t);function t(r){var s;return n(this,t),(s=e.call(this,"[TossPayments SDK] Failed to load script: [".concat(r,"]"))).name="ScriptLoadFailedError",s}return t}();function h(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).src,r=void 0===t?"https://js.tosspayments.com/v1":t;return"undefined"==typeof window?Promise.resolve({requestPayment:function(){throw new Error("[TossPayments SDK] It looks like runtime is not from browser. This method is only executable on browser.")},requestBillingAuth:function(){throw new Error("[TossPayments SDK] It looks like runtime is not from browser. This method is only executable on browser.")},cancelPayment:function(){throw new Error("[TossPayments SDK] It looks like runtime is not from browser. This method is only executable on browser.")}}):function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=m)return m;var n=new Promise(function(n,s){try{var i=function(){null!=x(t)?n(x(t)):s(new f(t))},o=function(){s(new p(e))};if("undefined"==typeof window||"undefined"==typeof document)return n(null);if(null!=x(t))return n(x(t));var c,l=document.querySelector('script[src="'.concat(e,'"]'));null!=l&&(l.removeEventListener("load",i),l.removeEventListener("error",o),null===(c=l.parentElement)||void 0===c||c.removeChild(l));var a=document.createElement("script");a.src=e,a.addEventListener("load",i),a.addEventListener("error",o),null!=r.priority&&(a.fetchPriority=r.priority),document.head.appendChild(a)}catch(u){return void s(u)}});return m=n.catch(function(e){return m=null,Promise.reject(e)})}(r,"TossPayments").then(function(t){return t(e)})}function b(){const n=t(),[s,i]=r.useState(null),[o,c]=r.useState(!1),[l,a]=r.useState("토스페이"),[u,d]=r.useState(null);r.useEffect(()=>{(async()=>{try{const e=await h("test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq");d(e)}catch(e){}})()},[]);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"border-b border-gray-100 sticky top-0 z-30 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 flex items-center justify-center cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-2xl text-gray-800"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"자석 충전"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("div",{className:"px-5 py-8 text-center border-b border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"보유 자석"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("img",{src:"/image/magnet.png",alt:"자석",className:"w-8 h-8"}),e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:"150"})]})]}),e.jsx("div",{className:"px-5 py-6",children:e.jsx("div",{className:"space-y-3",children:[{id:"basic",coins:50,price:5e3},{id:"standard",coins:100,price:9e3,bonus:10},{id:"premium",coins:300,price:25e3,bonus:50,popular:!0},{id:"vip",coins:500,price:4e4,bonus:100},{id:"mega",coins:1e3,price:75e3,bonus:250},{id:"ultra",coins:2e3,price:14e4,bonus:600}].map(t=>e.jsxs("button",{onClick:()=>(e=>{i(e),c(!0)})(t),className:"w-full flex items-center justify-between p-5 rounded-2xl border-2 transition-all cursor-pointer "+(t.popular?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center "+(t.popular?"bg-pink-50":"bg-gray-100"),children:e.jsx("img",{src:"/image/magnet.png",alt:"자석",className:"w-8 h-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t.coins.toLocaleString()}),t.bonus&&e.jsxs("span",{className:"text-sm font-medium text-pink-500",children:["+",t.bonus]})]}),t.popular&&e.jsx("span",{className:"text-xs font-medium text-pink-500",children:"인기"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[t.price.toLocaleString(),"원"]})})]},t.id))})}),o&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full sm:max-w-md sm:rounded-3xl rounded-t-3xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"결제하기"}),e.jsx("button",{onClick:()=>c(!1),className:"w-9 h-9 flex items-center justify-center cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl text-gray-600"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-5 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-pink-50 rounded-full flex items-center justify-center",children:e.jsx("img",{src:"/images/magnet.png",alt:"자석",className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"자석"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.coins.toLocaleString(),s.bonus&&e.jsxs("span",{className:"text-base text-pink-500 ml-1",children:["+",s.bonus]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"결제금액"}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[s.price.toLocaleString(),e.jsx("span",{className:"text-lg text-gray-600 ml-1",children:"원"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"결제 수단"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>a("토스페이"),className:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all cursor-pointer "+("토스페이"===l?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"toss"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"토스페이"})]}),"토스페이"===l&&e.jsx("i",{className:"ri-check-line text-xl text-blue-500"})]}),e.jsxs("button",{onClick:()=>a("CARD"),className:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all cursor-pointer "+("CARD"===l?"border-purple-500 bg-purple-50":"border-gray-200 bg-white"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-bank-card-2-line text-white text-lg"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"신용/체크카드"})]}),"CARD"===l&&e.jsx("i",{className:"ri-check-line text-xl text-purple-500"})]}),e.jsxs("button",{onClick:()=>a("TRANSFER"),className:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all cursor-pointer "+("TRANSFER"===l?"border-green-500 bg-green-50":"border-gray-200 bg-white"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-bank-line text-white text-lg"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"계좌이체"})]}),"TRANSFER"===l&&e.jsx("i",{className:"ri-check-line text-xl text-green-500"})]})]})]}),e.jsxs("button",{onClick:async()=>{if(s&&u)try{const e=`ORDER_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,t=`자석 ${s.coins}개${s.bonus?` (+${s.bonus} 보너스)`:""}`,r=s.coins+(s.bonus||0);localStorage.setItem("selectedPackageId",s.id),localStorage.setItem("selectedCoins",r.toString()),await u.requestPayment(l,{amount:s.price,orderId:e,orderName:t,successUrl:`${window.location.origin}/payment/success`,failUrl:`${window.location.origin}/payment/fail`,customerName:"사용자"})}catch(e){alert("결제 요청에 실패했습니다. 다시 시도해주세요.")}},className:"w-full bg-gray-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-gray-800 transition-all cursor-pointer whitespace-nowrap",children:[s.price.toLocaleString(),"원 결제하기"]})]})]})})]})}export{b as default};
