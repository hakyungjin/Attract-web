import{u as e,j as s}from"./index-B3GHrogv.js";import{e as r,r as t}from"./vendor-DkI5JUVe.js";import"./supabase-DEy9n1le.js";function a(){const a=r(),{signInPhone:n,signUpPhone:l}=e(),[o,c]=t.useState(!0),[i,d]=t.useState(!1),[m,u]=t.useState({phoneNumber:"",password:"",confirmPassword:"",name:"",age:"",gender:"male"}),x=e=>{const s=(e=>{const s=e.replace(/[^\d]/g,"").slice(0,11);return s.length<=3?s:s.length<=7?`${s.slice(0,3)}-${s.slice(3)}`:`${s.slice(0,3)}-${s.slice(3,7)}-${s.slice(7)}`})(e.target.value);u({...m,phoneNumber:s})},p=e=>{const s=e.replace(/[^\d]/g,"");return 11===s.length&&s.startsWith("010")};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 via-sky-50 to-blue-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"relative",children:s.jsx("img",{src:"/image/icon.png",alt:"Attract Logo",className:"w-20 h-20 rounded-2xl object-cover drop-shadow-lg"})})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Attract"}),s.jsx("p",{className:"text-gray-600",children:"두근거리는 첫 만남처럼"})]}),s.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[s.jsxs("div",{className:"flex bg-gray-100 rounded-full p-1 mb-6",children:[s.jsx("button",{onClick:()=>c(!0),className:"flex-1 py-3 rounded-full font-medium transition-all cursor-pointer whitespace-nowrap "+(o?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md":"text-gray-600"),children:"로그인"}),s.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3 rounded-full font-medium transition-all cursor-pointer whitespace-nowrap "+(o?"text-gray-600":"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md"),children:"회원가입"})]}),o?s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{if(!m.phoneNumber||!m.password)return alert("전화번호와 비밀번호를 입력해주세요."),void d(!1);if(!p(m.phoneNumber))return alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)"),void d(!1);const e=m.phoneNumber.replace(/-/g,""),{error:s,profileCompleted:r}=await n(e,m.password);if(s)return void alert(`로그인 실패: ${s.message}`);r?a("/"):a("/signup-profile",{state:{phoneNumber:e}})}catch(s){alert(`로그인 오류: ${s.message}`)}finally{d(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),s.jsx("input",{type:"tel",value:m.phoneNumber,onChange:x,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"010-1234-5678",maxLength:13})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"비밀번호"}),s.jsx("input",{type:"password",value:m.password,onChange:e=>u({...m,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"비밀번호를 입력하세요"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"mr-2"}),s.jsx("span",{className:"text-gray-600",children:"로그인 상태 유지"})]}),s.jsx("button",{type:"button",onClick:()=>a("/support"),className:"text-cyan-500 hover:text-cyan-600 cursor-pointer whitespace-nowrap",children:"비밀번호 찾기"})]}),s.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-4 rounded-xl font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:i?"로그인 중...":"로그인"})]}):s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),m.phoneNumber)if(p(m.phoneNumber))if(m.name)if(m.age)if(m.gender&&""!==m.gender)if(m.password===m.confirmPassword)if(m.password.length<8)alert("비밀번호는 8자 이상이어야 합니다.");else{d(!0);try{const e=m.phoneNumber.replace(/-/g,""),{error:s}=await l(e,m.password,{name:m.name,age:parseInt(m.age),gender:m.gender});if(s)return void alert(`회원가입 실패: ${s.message}`);alert("회원가입이 완료되었습니다! 프로필을 완성해주세요."),a("/signup-profile",{state:{phoneNumber:e}})}catch(s){alert(`회원가입 오류: ${s.message}`)}finally{d(!1)}}else alert("비밀번호가 일치하지 않습니다.");else alert("성별을 선택해주세요.");else alert("나이를 입력해주세요.");else alert("이름을 입력해주세요.");else alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)");else alert("전화번호를 입력해주세요.")},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["전화번호 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",required:!0,value:m.phoneNumber,onChange:x,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"010-1234-5678",maxLength:13})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["이름 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:m.name,onChange:e=>u({...m,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"이름을 입력하세요"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["나이 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",required:!0,min:"19",max:"99",value:m.age,onChange:e=>u({...m,age:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"나이"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["성별 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{required:!0,value:m.gender,onChange:e=>u({...m,gender:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm pr-8",children:[s.jsx("option",{value:"",children:"성별을 선택하세요"}),s.jsx("option",{value:"male",children:"남성"}),s.jsx("option",{value:"female",children:"여성"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",required:!0,minLength:8,value:m.password,onChange:e=>u({...m,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"8자 이상 입력하세요"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 확인 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",required:!0,minLength:8,value:m.confirmPassword,onChange:e=>u({...m,confirmPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"비밀번호를 다시 입력하세요"})]}),s.jsxs("label",{className:"flex items-start cursor-pointer text-sm",children:[s.jsx("input",{type:"checkbox",className:"mt-1 mr-2"}),s.jsxs("span",{className:"text-gray-600",children:[s.jsx("button",{type:"button",onClick:()=>a("/policy/terms"),className:"text-cyan-500 hover:underline",children:"이용약관"})," 및 ",s.jsx("button",{type:"button",onClick:()=>a("/policy/privacy"),className:"text-cyan-500 hover:underline",children:"개인정보처리방침"}),"에 동의합니다"]})]}),s.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-4 rounded-xl font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:i?"가입 중...":"회원가입"})]})]}),s.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:s.jsxs("p",{children:["문제가 있으신가요?"," ",s.jsx("button",{onClick:()=>a("/support"),className:"text-cyan-500 hover:text-cyan-600 cursor-pointer whitespace-nowrap",children:"고객센터"})]})})]})})}export{a as default};
