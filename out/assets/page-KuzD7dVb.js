import{s as e,u as t,j as s,l as a}from"./index-DMrnIJCM.js";import{e as l,u as i,r}from"./vendor-DkI5JUVe.js";import{b as n,c}from"./ssodaaSmsService-DBlKP7oO.js";import{g as o}from"./avatarUtils-Jlyh85v5.js";import"./supabase-DEy9n1le.js";const d=async(t,s)=>{try{const{data:a,error:l}=await e.functions.invoke("send-push",{body:{userId:t,title:s.title,body:s.body,data:s.data||{}}});return l?{success:!1,error:l}:{success:!0,result:a}}catch(a){return{success:!1,error:a}}},m={INTJ:{ENFP:95,ENTP:90,INFJ:85,INFP:85,ENTJ:80,INTP:80,ENFJ:75,ISTJ:70,ISFJ:65,ESTJ:65,ESFJ:60,ISTP:60,ISFP:55,ESTP:55,ESFP:50,INTJ:75},INTP:{ENTJ:95,ENFJ:90,INTJ:85,INFJ:85,ENTP:80,INFP:75,ENFP:70,ISTJ:65,ISTP:65,ESTJ:60,ISFJ:60,ESTP:55,ESFJ:55,ISFP:50,ESFP:50,INTP:75},ENTJ:{INTP:95,INFP:90,INTJ:85,ENFP:85,ENTP:80,INFJ:75,ENFJ:70,ISTP:65,ISTJ:65,ESTP:60,ESTJ:60,ISFP:55,ISFJ:55,ESFP:50,ESFJ:50,ENTJ:70},ENTP:{INFJ:95,INTJ:90,ENFP:85,INFP:85,ENTJ:80,INTP:80,ENFJ:75,ISFJ:70,ISTJ:65,ESFJ:65,ESTJ:60,ISFP:60,ISTP:55,ESFP:55,ESTP:50,ENTP:75},INFJ:{ENTP:95,ENFP:90,INFP:85,INTJ:85,ENFJ:80,INTP:80,ENTJ:75,ISFP:70,ISTP:65,ESFP:65,ESTP:60,ISFJ:60,ISTJ:55,ESFJ:55,ESTJ:50,INFJ:75},INFP:{ENFJ:95,ENTJ:90,INFJ:85,ENFP:85,ENTP:80,INTJ:75,INTP:75,ISFJ:70,ESFJ:65,ISTJ:65,ESTJ:60,ISFP:60,ISTP:55,ESFP:55,ESTP:50,INFP:75},ENFJ:{INFP:95,INTP:90,ENFP:85,INFJ:85,ENTJ:75,ENTP:75,ISFP:70,ISFJ:70,ESFJ:65,ISTJ:65,ESTJ:60,ISTP:60,ESFP:55,ESTP:55,INTJ:70,ENFJ:75},ENFP:{INTJ:95,INFJ:90,ENFJ:85,INFP:85,ENTP:80,ENTJ:80,INTP:75,ESFJ:70,ISFJ:70,ESFP:65,ISFP:65,ESTJ:60,ISTJ:60,ESTP:55,ISTP:55,ENFP:75},ISTJ:{ESFP:85,ESTP:80,ISFP:75,ISTP:75,ESTJ:75,ISFJ:70,ESFJ:70,INTJ:65,ENTJ:65,ENTP:60,INTP:60,ENFP:55,INFP:55,ENFJ:55,INFJ:50,ISTJ:70},ISFJ:{ESFP:90,ESTP:85,ENFP:80,ENTP:75,INFP:75,ESFJ:75,ISFP:70,ESTJ:70,ISTJ:70,ISTP:65,ENFJ:65,INFJ:60,ENTJ:55,INTJ:55,INTP:55,ISFJ:70},ESTJ:{ISFP:85,ISTP:80,ESFP:75,ESTP:75,ISTJ:75,ESFJ:70,ISFJ:70,ENTJ:65,INTJ:65,INTP:60,ENTP:60,INFP:55,ENFP:55,INFJ:55,ENFJ:50,ESTJ:70},ESFJ:{ISFP:90,ISTP:85,INFP:80,ENFP:75,INTP:75,ESFP:75,ISTJ:70,ESTJ:70,ISFJ:70,ESTP:65,INFJ:65,ENFJ:60,INTJ:55,ENTJ:55,ENTP:55,ESFJ:70},ISTP:{ESFJ:85,ESTJ:80,ISFJ:75,ISTJ:75,ESTP:75,ESFP:70,ISFP:70,ENTJ:65,ENTP:60,INTJ:60,INTP:60,ENFJ:55,INFJ:55,ENFP:55,INFP:50,ISTP:70},ISFP:{ENFJ:90,ESFJ:90,INFJ:85,ESTJ:80,ENTJ:75,ISTJ:75,ESFP:75,ISFJ:70,ESTP:70,ISTP:70,ENTP:65,INFP:65,ENFP:60,INTJ:55,INTP:50,ISFP:70},ESTP:{ISFJ:85,ISTJ:80,ESFJ:75,ESTJ:75,ISTP:75,ISFP:70,ESFP:70,ENTP:60,INTP:60,ENTJ:60,INTJ:55,INFP:55,ENFP:55,INFJ:55,ENFJ:50,ESTP:70},ESFP:{ISFJ:90,ISTJ:85,ESFJ:80,ENFJ:75,ESTJ:75,INFJ:75,ISFP:75,ESTP:70,ISTP:70,ENFP:65,INFP:65,ENTP:60,INTP:55,ENTJ:50,INTJ:50,ESFP:70}},x={INTJ:{name:"Ï†ÑÎûµÍ∞Ä",description:"ÏÉÅÏÉÅÎ†•Ïù¥ ÌíçÎ∂ÄÌïòÍ≥† Ï†ÑÎûµÏ†ÅÏù∏ ÏÇ¨Í≥†Î•º ÌïòÎäî Í≥ÑÌöçÍ∞Ä"},INTP:{name:"ÎÖºÎ¶¨Ïà†ÏÇ¨",description:"ÌòÅÏã†Ï†ÅÏù∏ ÏïÑÏù¥ÎîîÏñ¥Î•º Í∞ÄÏßÑ ÏßÄÏ†Å ÌÉêÍµ¨Ïûê"},ENTJ:{name:"ÌÜµÏÜîÏûê",description:"ÎåÄÎã¥ÌïòÍ≥† ÏÉÅÏÉÅÎ†•Ïù¥ ÌíçÎ∂ÄÌïú Í∞ïÎ†•Ìïú ÏßÄÎèÑÏûê"},ENTP:{name:"Î≥ÄÎ°†Í∞Ä",description:"ÏßÄÏ†Å ÎèÑÏ†ÑÏùÑ Ï¶êÍ∏∞Îäî ÏòÅÎ¶¨Ìïú ÏïÖÎßàÏùò ÎåÄÎ≥ÄÏù∏"},INFJ:{name:"ÏòπÌò∏Ïûê",description:"Ïù¥ÏÉÅÏ£ºÏùòÏ†ÅÏù¥Í≥† ÏõêÏπôÏ£ºÏùòÏ†ÅÏù∏ ÏÑ†ÏùòÏùò ÌôúÎèôÍ∞Ä"},INFP:{name:"Ï§ëÏû¨Ïûê",description:"Ïù¥ÌÉÄÏ†ÅÏù¥Í≥† Ìï≠ÏÉÅ ÏÑ†Ìïú ÎèôÍ∏∞Î°ú ÌñâÎèôÌïòÎäî ÏÇ¨Îûå"},ENFJ:{name:"ÏÑ†ÎèÑÏûê",description:"Ïπ¥Î¶¨Ïä§Îßà ÏûàÍ≥† ÏòÅÍ∞êÏùÑ Ï£ºÎäî ÏßÄÎèÑÏûê"},ENFP:{name:"ÌôúÎèôÍ∞Ä",description:"Ïó¥Ï†ïÏ†ÅÏù¥Í≥† Ï∞ΩÏùòÏ†ÅÏù∏ ÏûêÏú†Î°úÏö¥ ÏòÅÌòº"},ISTJ:{name:"ÌòÑÏã§Ï£ºÏùòÏûê",description:"Ïã§Ïö©Ï†ÅÏù¥Í≥† ÏÇ¨Ïã§Ïóê Í∏∞Î∞òÌïú Ïã†Î¢∞Ìï† Ïàò ÏûàÎäî ÏÇ¨Îûå"},ISFJ:{name:"ÏàòÌò∏Ïûê",description:"ÌóåÏã†Ï†ÅÏù¥Í≥† Îî∞ÎúªÌïú ÏàòÌò∏Ïûê"},ESTJ:{name:"Í≤ΩÏòÅÏûê",description:"ÏßàÏÑúÎ•º Ï§ëÏãúÌïòÎäî ÌõåÎ•≠Ìïú Í¥ÄÎ¶¨Ïûê"},ESFJ:{name:"ÏßëÏ†ïÍ¥Ä",description:"Î∞∞Î†§Ïã¨Ïù¥ ÎßéÍ≥† ÏÇ¨ÍµêÏ†ÅÏù∏ ÌòëÎ†•Ïûê"},ISTP:{name:"Ïû•Ïù∏",description:"ÎåÄÎã¥ÌïòÍ≥† Ïã§Ïö©Ï†ÅÏù∏ ÌÉêÌóòÍ∞Ä"},ISFP:{name:"Î™®ÌóòÍ∞Ä",description:"Ïú†Ïó∞ÌïòÍ≥† Îß§Î†•Ï†ÅÏù∏ ÏòàÏà†Í∞Ä"},ESTP:{name:"ÏÇ¨ÏóÖÍ∞Ä",description:"ÏòÅÎ¶¨ÌïòÍ≥† ÏóêÎÑàÏßÄ ÎÑòÏπòÎäî Î™®ÌóòÏùÑ Ï¶êÍ∏∞Îäî ÏÇ¨Îûå"},ESFP:{name:"Ïó∞ÏòàÏù∏",description:"Ï¶âÌù•Ï†ÅÏù¥Í≥† Ïó¥Ï†ïÏ†ÅÏù∏ Ï¶êÍ±∞ÏõÄÏùÑ Ï∂îÍµ¨ÌïòÎäî ÏÇ¨Îûå"}},h={excellent:{title:"ÌôòÏÉÅÏùò Í∂ÅÌï©",emoji:"üíñ",color:"#ec4899"},good:{title:"Ï¢ãÏùÄ Í∂ÅÌï©",emoji:"üíï",color:"#f472b6"},average:{title:"ÌèâÎ≤îÌïú Í∂ÅÌï©",emoji:"üíõ",color:"#fbbf24"},challenging:{title:"ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌïú Í∂ÅÌï©",emoji:"üíô",color:"#60a5fa"}};function u(e,t){const s=e.toUpperCase(),a=t.toUpperCase();if(!m[s]||!m[a])return{score:50,level:"average",title:"Ïïå Ïàò ÏóÜÎäî Í∂ÅÌï©",description:"MBTI Ï†ïÎ≥¥Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.",strengths:["ÏÑúÎ°úÎ•º ÏïåÏïÑÍ∞ÄÎäî ÏãúÍ∞ÑÏù¥ ÌïÑÏöîÌï©ÎãàÎã§"],challenges:["MBTIÎ•º Ï†ïÌôïÌûà ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"],advice:"MBTI Í≤ÄÏÇ¨Î•º ÌÜµÌï¥ Ï†ïÌôïÌïú Ïú†ÌòïÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî."};const l=m[s][a]||50;let i;i=l>=85?"excellent":l>=70?"good":l>=55?"average":"challenging";const r=((e,t,s)=>{let a;a=s>=85?"excellent":s>=70?"good":s>=55?"average":"challenging";const l={excellent:{strengths:["ÏÑúÎ°úÏùò Îã§Î•∏ Ï†êÏù¥ ÏôÑÎ≤ΩÌïòÍ≤å Î≥¥ÏôÑÎê©ÎãàÎã§","ÍπäÏùÄ Ïù¥Ìï¥ÏôÄ Í≥µÍ∞êÎåÄÎ•º ÌòïÏÑ±Ìï©ÎãàÎã§","Ìï®Íªò ÏÑ±Ïû•ÌïòÎ©∞ Î∞úÏ†ÑÌï† Ïàò ÏûàÏäµÎãàÎã§","ÏûêÏó∞Ïä§Îü¨Ïö¥ ÏºÄÎØ∏Ïä§Ìä∏Î¶¨Í∞Ä ÏûàÏäµÎãàÎã§"],challenges:["ÎÑàÎ¨¥ ÎπÑÏä∑Ìï¥ÏÑú Í∞ÄÎÅî ÏßÄÎ£®Ìï† Ïàò ÏûàÏäµÎãàÎã§","ÏÑúÎ°úÏùò ÏïΩÏ†êÏùÑ Î≥¥ÏôÑÌïòÎäî ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§"],advice:"ÏÑúÎ°úÏùò Ï∞®Ïù¥Î•º Ï°¥Ï§ëÌïòÎ©∞, Ìï®Íªò ÏÑ±Ïû•ÌïòÎäî Îç∞ ÏßëÏ§ëÌïòÏÑ∏Ïöî. ÌõåÎ•≠Ìïú ÌååÌä∏ÎÑàÏã≠ÏùÑ ÎßåÎì§ Ïàò ÏûàÏäµÎãàÎã§!"},good:{strengths:["ÏÑúÎ°úÎ•º Ï°¥Ï§ëÌïòÍ≥† Ïù¥Ìï¥Ìï©ÎãàÎã§","Í±¥Í∞ïÌïú Í¥ÄÍ≥ÑÎ•º ÎßåÎì§ Ïàò ÏûàÏäµÎãàÎã§","ÏÑúÎ°úÏóêÍ≤å Í∏çÏ†ïÏ†ÅÏù∏ ÏòÅÌñ•ÏùÑ Ï§çÎãàÎã§"],challenges:["Í∞ÄÏπòÍ¥Ä Ï∞®Ïù¥Î°ú Ïù∏Ìïú ÏùòÍ≤¨ Ï∂©ÎèåÏù¥ ÏûàÏùÑ Ïàò ÏûàÏäµÎãàÎã§","ÏÑúÎ°úÏùò ÏÜåÌÜµ Î∞©ÏãùÏùÑ Ïù¥Ìï¥ÌïòÎäî ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§","ÎïåÎïåÎ°ú Ïò§Ìï¥Í∞Ä ÏÉùÍ∏∏ Ïàò ÏûàÏäµÎãàÎã§"],advice:"Ïó¥Î¶∞ ÎßàÏùåÏúºÎ°ú ÏÜåÌÜµÌïòÍ≥†, ÏÑúÎ°úÏùò Ï∞®Ïù¥Î•º Ïù¥Ìï¥ÌïòÎ†§ ÎÖ∏Î†•ÌïòÏÑ∏Ïöî. Ï¢ãÏùÄ Í¥ÄÍ≥ÑÎ•º ÎßåÎì§ Ïàò ÏûàÏäµÎãàÎã§."},average:{strengths:["ÏÑúÎ°úÏóêÍ≤åÏÑú ÏÉàÎ°úÏö¥ Í≤ÉÏùÑ Î∞∞Ïö∏ Ïàò ÏûàÏäµÎãàÎã§","Îã§ÏñëÌïú Í¥ÄÏ†êÏùÑ ÎÇòÎàå Ïàò ÏûàÏäµÎãàÎã§"],challenges:["ÏÑ±Í≤© Ï∞®Ïù¥Î°ú Ïù∏Ìïú Í∞àÎì±Ïù¥ ÏûêÏ£º ÏûàÏùÑ Ïàò ÏûàÏäµÎãàÎã§","ÏÑúÎ°úÎ•º Ïù¥Ìï¥ÌïòÎäî Îç∞ ÏãúÍ∞ÑÏù¥ ÌïÑÏöîÌï©ÎãàÎã§","ÏÜåÌÜµÏóê ÎßéÏùÄ ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§","Í∞ÄÏπòÍ¥Ä Ï∞®Ïù¥Î•º Ï°∞Ïú®Ìï¥Ïïº Ìï©ÎãàÎã§"],advice:"Ïù∏ÎÇ¥Ïã¨ÏùÑ Í∞ÄÏßÄÍ≥† ÏÑúÎ°úÎ•º Ïù¥Ìï¥ÌïòÎ†§ ÎÖ∏Î†•ÌïòÏÑ∏Ïöî. ÏãúÍ∞ÑÍ≥º ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌïòÏßÄÎßå Ï¢ãÏùÄ Í¥ÄÍ≥ÑÎ•º ÎßåÎì§ Ïàò ÏûàÏäµÎãàÎã§."},challenging:{strengths:["ÏÑúÎ°úÏóêÍ≤å ÏÉàÎ°úÏö¥ ÏãúÍ∞ÅÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§","Îã§ÏñëÏÑ±ÏùÑ Í≤ΩÌóòÌï† Ïàò ÏûàÏäµÎãàÎã§"],challenges:["Í∑ºÎ≥∏Ï†ÅÏù∏ Í∞ÄÏπòÍ¥Ä Ï∞®Ïù¥Í∞Ä ÏûàÏäµÎãàÎã§","ÏÜåÌÜµÏù¥ Îß§Ïö∞ Ïñ¥Î†§Ïö∏ Ïàò ÏûàÏäµÎãàÎã§","ÏÑúÎ°úÏùò ÌñâÎèôÏùÑ Ïù¥Ìï¥ÌïòÍ∏∞ ÌûòÎì≠ÎãàÎã§","ÎßéÏùÄ ÌÉÄÌòëÍ≥º ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§","Í∞àÎì±Ïù¥ ÏûêÏ£º Î∞úÏÉùÌï† Ïàò ÏûàÏäµÎãàÎã§"],advice:"ÏÑúÎ°úÏùò Í∑ºÎ≥∏Ï†ÅÏù∏ Ï∞®Ïù¥Î•º Ïù∏Ï†ïÌïòÍ≥†, Ï°¥Ï§ëÌïòÎäî Í≤ÉÏù¥ Ï§ëÏöîÌï©ÎãàÎã§. Í¥ÄÍ≥Ñ Ïú†ÏßÄÏóê ÏÉÅÎãπÌïú ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§."}}[a],i=x[e],r=x[t];return{title:h[a].title,description:`${i.name}(${e})ÏôÄ ${r.name}(${t})Ïùò Ï°∞Ìï©ÏûÖÎãàÎã§.`,strengths:l.strengths,challenges:l.challenges,advice:l.advice}})(s,a,l);return{score:l,level:i,...r}}function N(e){return h[e].color}function b(){const m=l(),x=i(),{user:b}=t(),p=x.state?.profile||x.state?.authorData,[f,g]=r.useState(!1),[j,S]=r.useState(!1),[T,I]=r.useState(!1),[E,F]=r.useState(!1),[J,P]=r.useState(0),[v,w]=r.useState(0),[y,_]=r.useState(!1),[k,$]=r.useState(null),[C,q]=r.useState(null),[z,M]=r.useState(!1),[B,U]=r.useState([]),A=50;r.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);const D=(()=>{const e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e).id}catch{return null}})(),O=D&&p?.id===D;r.useEffect(()=>{b||D||I(!0)},[b,D]),r.useEffect(()=>{(async()=>{if(!b?.id)return;const{data:t}=await e.from("users").select("coins, mbti").eq("id",b.id).single();t&&(P(t.coins||0),$(t.mbti||null))})()},[b?.id]),r.useEffect(()=>{(async()=>{if(!p?.id)return;if(p.interests&&p.interests.length>0)return void U(p.interests);const{data:t}=await e.from("users").select("interests").eq("id",p.id).single();t?.interests&&U(t.interests)})()},[p?.id,p?.interests]);const G=(()=>{const e=[];return p?.profile_image&&e.push(p.profile_image),p?.photos&&Array.isArray(p.photos)&&p.photos.forEach(t=>{t&&!e.includes(t)&&e.push(t)}),0===e.length?[o(p?.gender||"")]:e})();if(!p)return m(-1),null;const H={school:p?.school||"",height:p?.height||"",bodyType:p?.bodyType||p?.body_type||"",style:p?.style||"",religion:p?.religion||"",mbti:p?.mbti||"",smoking:p?.smoking||"",drinking:p?.drinking||""},K=()=>{if(!k)return void alert("ÎÇ¥ MBTI Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§. ÌîÑÎ°úÌïÑÏùÑ ÏóÖÎç∞Ïù¥Ìä∏Ìï¥Ï£ºÏÑ∏Ïöî.");if(!p?.mbti)return void alert("ÏÉÅÎåÄÎ∞©Ïùò MBTI Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§.");const e=u(k,p.mbti);q(e),_(!0)},L="from-cyan-500 via-blue-500 to-indigo-500";return s.jsxs("div",{className:"min-h-screen bg-slate-50 "+(T?"overflow-hidden":""),children:[s.jsxs("div",{className:""+(T?"blur-sm pointer-events-none":""),children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-4",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},children:[s.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),m(-1)},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:s.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),s.jsx("button",{onClick:()=>{window.confirm("Ïù¥ ÏÇ¨Ïö©ÏûêÎ•º Ïã†Í≥†ÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&alert("Ïã†Í≥† Í∏∞Îä• Ï§ÄÎπÑÏ§ëÏûÖÎãàÎã§.")},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:s.jsx("i",{className:"ri-more-2-fill text-white text-xl"})})]}),s.jsxs("div",{className:"relative w-full aspect-[3/4] max-h-[85vh] bg-slate-200 overflow-hidden",children:[s.jsx("img",{src:G[v],alt:`${p.name}`,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),s.jsx("button",{onClick:()=>{w(e=>0===e?G.length-1:e-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:s.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),s.jsx("button",{onClick:()=>{w(e=>e===G.length-1?0:e+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:s.jsx("i",{className:"ri-arrow-right-s-line text-white text-2xl"})}),G.length>1&&s.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 flex space-x-2 z-10",children:G.map((e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),w(t)},className:"w-2 h-2 rounded-full transition-all cursor-pointer shadow-sm "+(t===v?"bg-white w-4":"bg-white/50 hover:bg-white/80")},t))}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-10",children:s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-1 drop-shadow-lg",children:[p.name,", ",p.age||"??"]}),s.jsxs("div",{className:"flex items-center space-x-3 text-white/90",children:[p.location&&s.jsxs("span",{className:"flex items-center text-sm",children:[s.jsx("i",{className:"ri-map-pin-line mr-1"}),p.location]}),"ÎπÑÍ≥µÍ∞ú"!==H.school&&s.jsxs("span",{className:"flex items-center text-sm",children:[s.jsx("i",{className:"ri-graduation-cap-line mr-1"}),H.school]})]})]}),"ÎπÑÍ≥µÍ∞ú"!==H.mbti&&s.jsx("button",{onClick:K,className:`bg-gradient-to-r ${L} px-4 py-2 rounded-full shadow-lg hover:scale-105 transition-transform cursor-pointer`,children:s.jsx("span",{className:"text-white font-bold text-sm",children:H.mbti})})]})})]})]}),s.jsxs("div",{className:"px-4 py-6 space-y-4 pb-6",children:[p?.bio&&s.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:s.jsxs("p",{className:"text-slate-700 text-lg leading-relaxed whitespace-pre-wrap",children:['"',p.bio,'"']})}),s.jsxs("button",{onClick:K,className:`w-full bg-gradient-to-r ${L} rounded-3xl p-5 shadow-xl flex items-center justify-between hover:shadow-2xl hover:scale-[1.02] transition-all cursor-pointer group`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:"üíï"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"font-bold text-white text-lg block",children:"Ïö∞Î¶¨Ïùò Í∂ÅÌï©ÏùÄ?"}),s.jsxs("span",{className:"text-white/80 text-sm",children:[k||"?"," √ó ",p?.mbti||"?"," Í∂ÅÌï© ÌôïÏù∏ÌïòÍ∏∞"]})]})]}),s.jsx("i",{className:"ri-arrow-right-s-line text-3xl text-white/80 group-hover:translate-x-1 transition-transform"})]}),B.length>0&&s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[s.jsx("i",{className:"ri-sparkle-line mr-2 text-cyan-500"}),"Í¥ÄÏã¨ÏÇ¨"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:B.map((e,t)=>s.jsx("span",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 text-cyan-700 px-4 py-2.5 rounded-full text-sm font-medium border border-cyan-100 shadow-sm",children:e},t))})]}),s.jsx("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm",children:s.jsx("div",{className:"grid grid-cols-2",children:[{icon:"ri-ruler-line",label:"ÌÇ§",value:H.height},{icon:"ri-body-scan-line",label:"Ï≤¥Ìòï",value:H.bodyType},{icon:"ri-t-shirt-line",label:"Ïä§ÌÉÄÏùº",value:H.style},{icon:"ri-moon-line",label:"Ï¢ÖÍµê",value:H.religion},{icon:"ri-fire-line",label:"Ìù°Ïó∞",value:H.smoking},{icon:"ri-goblet-line",label:"ÏùåÏ£º",value:H.drinking}].map((e,t)=>s.jsxs("div",{className:`p-4 ${t%2==0?"border-r border-slate-100":""} ${t<4?"border-b border-slate-100":""}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("i",{className:`${e.icon} text-slate-400`}),s.jsx("span",{className:"text-xs text-slate-400",children:e.label})]}),s.jsx("span",{className:"font-semibold "+(e.value?"text-slate-700":"text-slate-300"),children:e.value||"-"})]},t))})}),!O&&s.jsx("div",{className:"flex justify-center py-1",children:s.jsx("button",{onClick:()=>{b?.id&&p?.id?F(!0):I(!0)},disabled:z,className:`bg-gradient-to-r ${L} rounded-full flex items-center justify-center shadow-2xl hover:shadow-3xl hover:scale-110 transition-all cursor-pointer disabled:opacity-70 ${z?"animate-pulse scale-110":""}`,style:{width:"72px",height:"72px"},children:s.jsx("i",{className:"ri-heart-fill text-white text-4xl "+(z?"animate-bounce":"")})})})]})]}),f&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:s.jsxs("div",{className:`bg-gradient-to-r ${L} text-white px-8 py-5 rounded-3xl shadow-2xl flex items-center space-x-3 animate-bounce`,children:[s.jsx("i",{className:"ri-heart-fill text-2xl"}),s.jsxs("span",{className:"font-bold text-lg",children:[p.name,"ÎãòÏóêÍ≤å ÌïòÌä∏Î•º Î≥¥ÎÉàÏñ¥Ïöî!"]})]})}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-3xl p-6 max-w-xs w-full text-center animate-scale-in",children:J>=A?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${L} rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg`,children:s.jsx("i",{className:"ri-heart-fill text-white text-3xl"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"ÌïòÌä∏ Î≥¥ÎÇ¥Í∏∞"}),s.jsxs("p",{className:"text-slate-500 text-sm mb-2",children:["ÏûêÏÑù ",A,"Í∞úÎ°ú ",p.name,"ÎãòÏóêÍ≤å",s.jsx("br",{}),"ÎßàÏùåÏùÑ Ï†ÑÌï¥Î≥¥ÏÑ∏Ïöî"]}),s.jsxs("p",{className:"text-cyan-600 text-xs mb-5",children:[s.jsx("i",{className:"ri-refresh-line mr-1"}),"Í±∞Ï†à Ïãú ÏûêÏÑùÏù¥ ÌôòÎ∂àÎê©ÎãàÎã§"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:async()=>{F(!1),M(!0);try{if(!b?.id||!p?.id)return void I(!0);if(J<A)return alert(`ÏûêÏÑùÏù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§. ÌòÑÏû¨ ${J}Í∞ú Î≥¥Ïú† Ï§ë`),void m("/coin-shop");const s=String(b.id),l=String(p.id);a.info("Îß§Ïπ≠ ÏöîÏ≤≠ Ï†ïÎ≥¥",{fromUserId:s,toUserId:l});const{data:i}=await e.from("matching_requests").select("id").eq("from_user_id",l).eq("to_user_id",s).eq("status","pending").limit(1),r=i&&i.length>0,{data:o}=await e.from("matching_requests").select("id").eq("from_user_id",s).eq("to_user_id",l).limit(1);if(o&&o.length>0)return alert("Ïù¥ÎØ∏ Îß§Ïπ≠ ÏöîÏ≤≠ÏùÑ Î≥¥ÎÇ∏ ÏÉÅÎåÄÏûÖÎãàÎã§"),void M(!1);const{error:x}=await e.from("users").update({coins:J-A}).eq("id",b.id);if(x)return a.error("ÏΩîÏù∏ Ï∞®Í∞ê Ïã§Ìå®",x),alert("ÏûêÏÑù Ï∞®Í∞êÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§."),void M(!1);P(e=>e-A);const{error:h}=await e.from("matching_requests").insert({from_user_id:s,to_user_id:l,status:r?"accepted":"pending"}).select();if(h){if("23505"===h.code)return alert("Ïù¥ÎØ∏ Îß§Ïπ≠ ÏöîÏ≤≠ÏùÑ Î≥¥ÎÇ∏ ÏÉÅÎåÄÏûÖÎãàÎã§"),void M(!1);throw h}if(r){await e.from("matching_requests").update({status:"accepted"}).eq("from_user_id",l).eq("to_user_id",s);const{data:i,error:r}=await e.from("chat_rooms").insert({user1_id:s,user2_id:l,created_at:(new Date).toISOString()}).select().single();r&&a.error("Ï±ÑÌåÖÎ∞© ÏÉùÏÑ± Ïã§Ìå®",r),await e.from("notifications").insert([{user_id:l,type:"match_success",title:"Îß§Ïπ≠ ÏÑ±ÏÇ¨! üíï",message:`${b.name||"ÎàÑÍµ∞Í∞Ä"}ÎãòÍ≥º Îß§Ïπ≠ÎêòÏóàÏäµÎãàÎã§!`,data:{matched_user_id:s,chat_room_id:i?.id},read:!1},{user_id:s,type:"match_success",title:"Îß§Ïπ≠ ÏÑ±ÏÇ¨! üíï",message:`${p.name}ÎãòÍ≥º Îß§Ïπ≠ÎêòÏóàÏäµÎãàÎã§!`,data:{matched_user_id:l,chat_room_id:i?.id},read:!1}]),await(async(e,t,s)=>d(e,{title:"üéâ Îß§Ïπ≠ ÏÑ±ÏÇ¨!",body:`${t}ÎãòÍ≥º Îß§Ïπ≠ÎêòÏóàÏäµÎãàÎã§! ÎåÄÌôîÎ•º ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî.`,data:{type:"match_success",chat_room_id:s||""}}))(l,b.name||"ÎàÑÍµ∞Í∞Ä",i?.id);try{const{data:t}=await e.from("users").select("phone_number").eq("id",l).single();t?.phone_number&&await n(t.phone_number,b.name||"ÎàÑÍµ∞Í∞Ä");const{data:a}=await e.from("users").select("phone_number").eq("id",s).single();a?.phone_number&&await n(a.phone_number,p.name)}catch(t){a.error("Îß§Ïπ≠ ÏÑ±ÏÇ¨ SMS Î∞úÏÜ° Ïã§Ìå®",t)}M(!1),S(!0)}else{await e.from("notifications").insert({user_id:l,type:"match_request",title:"ÏÉàÎ°úÏö¥ Îß§Ïπ≠ ÏöîÏ≤≠",message:`${b.name||"ÎàÑÍµ∞Í∞Ä"}ÎãòÏù¥ Îß§Ïπ≠ÏùÑ ÏöîÏ≤≠ÌñàÏäµÎãàÎã§`,data:{from_user_id:s,from_user_name:b.name},read:!1}),await(async(e,t,s)=>d(e,{title:"üíï ÏÉàÎ°úÏö¥ Îß§Ïπ≠ ÏöîÏ≤≠",body:`${t}ÎãòÏù¥ Îß§Ïπ≠ÏùÑ ÏöîÏ≤≠ÌñàÏäµÎãàÎã§`,data:{type:"match_request",from_user_id:s}}))(l,b.name||"ÎàÑÍµ∞Í∞Ä",s);try{const{data:t}=await e.from("users").select("phone_number").eq("id",l).single();t?.phone_number&&await c(t.phone_number,b.name||"ÎàÑÍµ∞Í∞Ä")}catch(t){a.error("Îß§Ïπ≠ ÏöîÏ≤≠ SMS Î∞úÏÜ° Ïã§Ìå®",t)}M(!1),g(!0),setTimeout(()=>{g(!1),m(-1)},2e3)}}catch(s){a.error("Îß§Ïπ≠ ÏöîÏ≤≠ Ïã§Ìå®",s),alert("Îß§Ïπ≠ ÏöîÏ≤≠Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: "+(s?.message||"Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò")),M(!1)}},className:`w-full bg-gradient-to-r ${L} text-white py-3.5 rounded-2xl font-bold hover:opacity-90 transition-all cursor-pointer`,children:"üíï Î≥¥ÎÇ¥Í∏∞"}),s.jsx("button",{onClick:()=>F(!1),className:"w-full text-slate-400 py-2 text-sm hover:text-slate-600 cursor-pointer",children:"Ï∑®ÏÜå"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("i",{className:"ri-coin-line text-slate-400 text-3xl"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"ÏûêÏÑùÏù¥ Î∂ÄÏ°±Ìï¥Ïöî"}),s.jsxs("p",{className:"text-slate-500 text-sm mb-5",children:["ÌòÑÏû¨ ",J,"Í∞ú / ÌïÑÏöî ",A,"Í∞ú"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>{F(!1),m("/coin-shop")},className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-3.5 rounded-2xl font-bold hover:opacity-90 transition-all cursor-pointer",children:"Ï∂©Ï†ÑÌïòÍ∏∞"}),s.jsx("button",{onClick:()=>F(!1),className:"w-full text-slate-400 py-2 text-sm hover:text-slate-600 cursor-pointer",children:"Îã´Í∏∞"})]})]})})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center animate-scale-in",children:[s.jsxs("div",{className:"flex items-center justify-center mb-6",children:[s.jsx("div",{className:"relative",children:s.jsx("img",{src:G[0],alt:p.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-xl"})}),s.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${L} rounded-full flex items-center justify-center -mx-4 z-10 shadow-xl`,children:s.jsx("span",{className:"text-3xl",children:"üíï"})}),s.jsx("div",{className:"relative",children:s.jsx("img",{src:b?.profile_image||o(""),alt:"ÎÇò",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-xl"})})]}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Îß§Ïπ≠ ÏÑ±Í≥µ! üéâ"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:[p.name,"ÎãòÍ≥º ÏÑúÎ°ú ÎßàÏùåÏù¥ ÌÜµÌñàÏñ¥Ïöî!",s.jsx("br",{}),"ÏßÄÍ∏à Î∞îÎ°ú ÎåÄÌôîÎ•º ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>{S(!1);const e=new CustomEvent("openChat",{detail:{userId:p.id,userName:p.name,userAvatar:G[0]||""}});window.dispatchEvent(e),m("/")},className:`w-full bg-gradient-to-r ${L} text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg`,children:"üí¨ ÎåÄÌôî ÏãúÏûëÌïòÍ∏∞"}),s.jsx("button",{onClick:()=>S(!1),className:"w-full text-slate-500 py-3 font-medium hover:text-slate-700 transition-colors cursor-pointer",children:"ÎÇòÏ§ëÏóê"})]})]})}),T&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-md"}),s.jsxs("div",{className:"relative bg-white rounded-3xl p-8 max-w-sm w-full mx-4 text-center shadow-2xl animate-scale-in",children:[s.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${L} rounded-full flex items-center justify-center mx-auto mb-6`,children:s.jsx("i",{className:"ri-lock-line text-white text-4xl"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï¥Ïöî"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:["ÌîÑÎ°úÌïÑÏùÑ ÌôïÏù∏ÌïòÍ≥†",s.jsx("br",{}),"Îß§Ïπ≠ÏùÑ ÏãúÏûëÌïòÎ†§Î©¥ Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî"]}),s.jsx("button",{onClick:()=>m("/login"),className:`w-full bg-gradient-to-r ${L} text-white py-4 rounded-full font-bold hover:opacity-90 transition-all shadow-lg cursor-pointer`,children:"Î°úÍ∑∏Ïù∏ÌïòÍ∏∞"})]})]}),y&&C&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full max-h-[85vh] overflow-y-auto animate-scale-in relative",children:[s.jsx("button",{onClick:()=>_(!1),className:"absolute top-4 right-4 w-10 h-10 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center transition-colors cursor-pointer z-10",children:s.jsx("i",{className:"ri-close-line text-xl text-slate-600"})}),s.jsxs("div",{className:"text-center mb-6 pt-2",children:[s.jsx("div",{className:"text-6xl mb-4",children:(Q=C.level,h[Q].emoji)}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:C.title}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"bg-purple-100 text-purple-600 px-4 py-2 rounded-full font-bold",children:k}),s.jsx("span",{className:"text-2xl",children:"√ó"}),s.jsx("span",{className:"bg-pink-100 text-pink-600 px-4 py-2 rounded-full font-bold",children:p?.mbti})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-5 mb-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-slate-600 font-medium",children:"Í∂ÅÌï© Ï†êÏàò"}),s.jsxs("span",{className:"text-3xl font-bold",style:{color:N(C.level)},children:[C.score,"Ï†ê"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"h-4 rounded-full transition-all duration-1000",style:{width:`${C.score}%`,backgroundColor:N(C.level)}})})]}),s.jsx("p",{className:"text-slate-600 mb-5 bg-slate-50 p-4 rounded-2xl leading-relaxed",children:C.description}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center text-lg",children:[s.jsx("span",{className:"text-green-500 mr-2",children:"üíö"})," Ïù¥Îü∞ Ï†êÏù¥ Ï¢ãÏïÑÏöî"]}),s.jsx("ul",{className:"space-y-2",children:C.strengths.slice(0,3).map((e,t)=>s.jsxs("li",{className:"text-slate-600 flex items-start bg-green-50 p-3 rounded-xl",children:[s.jsx("i",{className:"ri-check-line text-green-500 mr-2 mt-0.5"}),e]},t))})]}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center text-lg",children:[s.jsx("span",{className:"text-amber-500 mr-2",children:"üíõ"})," Ï£ºÏùòÌï† Ï†ê"]}),s.jsx("ul",{className:"space-y-2",children:C.challenges.slice(0,2).map((e,t)=>s.jsxs("li",{className:"text-slate-600 flex items-start bg-amber-50 p-3 rounded-xl",children:[s.jsx("i",{className:"ri-alert-line text-amber-500 mr-2 mt-0.5"}),e]},t))})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-4 mb-5",children:[s.jsxs("h4",{className:"font-bold text-slate-800 mb-2 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"üí°"})," Ïó∞Ïï† ÍøÄÌåÅ"]}),s.jsx("p",{className:"text-slate-700",children:C.advice})]}),s.jsx("button",{onClick:()=>_(!1),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg",children:"ÌôïÏù∏"})]})}),s.jsx("style",{children:"\n        @keyframes scale-in {\n          0% { transform: scale(0.9); opacity: 0; }\n          100% { transform: scale(1); opacity: 1; }\n        }\n        .animate-scale-in {\n          animation: scale-in 0.3s ease-out;\n        }\n      "})]});var Q}export{b as default};
