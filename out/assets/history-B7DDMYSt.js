import{u as e,j as s,f as t}from"./index-BAJ1soMH.js";import{u as a,r as l}from"./vendor-Dma7sgzX.js";function n(){const n=a(),{user:r}=e(),[c,i]=l.useState([]),[d,x]=l.useState(!0);l.useEffect(()=>{(async()=>{if(r?.id)try{const{payments:e,error:s}=await t.payments.getUserPayments(r.id);if(s)throw s;i(e)}catch(e){}finally{x(!1)}})()},[r]);const o=e=>{switch(e){case"pending":return s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-md",children:"입금 확인 중"});case"completed":return s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-md",children:"지급 완료"});case"cancelled":return s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-bold rounded-md",children:"취소됨"});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx("div",{className:"bg-white border-b border-slate-100 sticky top-0 z-30",children:s.jsxs("div",{className:"flex items-center px-4 py-4",children:[s.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 flex items-center justify-center cursor-pointer hover:bg-slate-50 rounded-full transition-colors",children:s.jsx("i",{className:"ri-arrow-left-line text-2xl text-slate-600"})}),s.jsx("h1",{className:"text-lg font-bold text-slate-800 ml-2",children:"결제 내역"})]})}),s.jsx("div",{className:"p-4 max-w-md mx-auto",children:d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"내역을 불러오는 중..."})]}):c.length>0?s.jsx("div",{className:"space-y-4",children:c.map(e=>s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-slate-100",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-400 mb-1",children:e.created_at?.toDate?new Date(e.created_at.toDate()).toLocaleString("ko-KR"):"방금 전"}),s.jsxs("h3",{className:"font-bold text-slate-800 text-lg",children:["자석 ",e.coins.toLocaleString(),"개"]})]}),o(e.status)]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[s.jsx("span",{className:"text-sm text-slate-500",children:"결제 금액"}),s.jsxs("span",{className:"font-bold text-slate-900",children:[e.price.toLocaleString(),"원"]})]}),e.account_holder&&s.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-slate-600",children:[s.jsx("span",{className:"text-slate-500",children:"입금자명"}),s.jsx("span",{className:"font-semibold",children:e.account_holder})]}),"pending"===e.status&&s.jsx("div",{className:"mt-4 bg-blue-50 rounded-xl p-3",children:s.jsxs("p",{className:"text-[11px] text-blue-600 leading-relaxed",children:[s.jsx("i",{className:"ri-information-line mr-1"}),"입금 확인 후 자석이 지급됩니다. (약 5분 소요)"]})})]},e.id))}):s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:s.jsx("i",{className:"ri-history-line text-4xl text-slate-200"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"결제 내역이 없습니다"}),s.jsx("p",{className:"text-slate-400 text-sm",children:"자석을 충전하고 서비스를 이용해보세요!"}),s.jsx("button",{onClick:()=>n("/coin-shop"),className:"mt-6 px-6 py-3 bg-cyan-500 text-white rounded-xl font-bold hover:bg-cyan-600 transition-colors",children:"자석 충전하러 가기"})]})})]})}export{n as default};
