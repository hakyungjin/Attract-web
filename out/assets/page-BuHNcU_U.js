import{s as e,u as s,j as t,l}from"./index-C3G5SuOE.js";import{e as a,u as i,r}from"./vendor-DkI5JUVe.js";import{g as n}from"./avatarUtils-Jlyh85v5.js";import"./supabase-DEy9n1le.js";const o=async(s,t)=>{try{const{data:l,error:a}=await e.functions.invoke("send-push",{body:{userId:s,title:t.title,body:t.body,data:t.data||{}}});return a?{success:!1,error:a}:{success:!0,result:l}}catch(l){return{success:!1,error:l}}},c={INTJ:{ENFP:95,ENTP:90,INFJ:85,INFP:85,ENTJ:80,INTP:80,ENFJ:75,ISTJ:70,ISFJ:65,ESTJ:65,ESFJ:60,ISTP:60,ISFP:55,ESTP:55,ESFP:50,INTJ:75},INTP:{ENTJ:95,ENFJ:90,INTJ:85,INFJ:85,ENTP:80,INFP:75,ENFP:70,ISTJ:65,ISTP:65,ESTJ:60,ISFJ:60,ESTP:55,ESFJ:55,ISFP:50,ESFP:50,INTP:75},ENTJ:{INTP:95,INFP:90,INTJ:85,ENFP:85,ENTP:80,INFJ:75,ENFJ:70,ISTP:65,ISTJ:65,ESTP:60,ESTJ:60,ISFP:55,ISFJ:55,ESFP:50,ESFJ:50,ENTJ:70},ENTP:{INFJ:95,INTJ:90,ENFP:85,INFP:85,ENTJ:80,INTP:80,ENFJ:75,ISFJ:70,ISTJ:65,ESFJ:65,ESTJ:60,ISFP:60,ISTP:55,ESFP:55,ESTP:50,ENTP:75},INFJ:{ENTP:95,ENFP:90,INFP:85,INTJ:85,ENFJ:80,INTP:80,ENTJ:75,ISFP:70,ISTP:65,ESFP:65,ESTP:60,ISFJ:60,ISTJ:55,ESFJ:55,ESTJ:50,INFJ:75},INFP:{ENFJ:95,ENTJ:90,INFJ:85,ENFP:85,ENTP:80,INTJ:75,INTP:75,ISFJ:70,ESFJ:65,ISTJ:65,ESTJ:60,ISFP:60,ISTP:55,ESFP:55,ESTP:50,INFP:75},ENFJ:{INFP:95,INTP:90,ENFP:85,INFJ:85,ENTJ:75,ENTP:75,ISFP:70,ISFJ:70,ESFJ:65,ISTJ:65,ESTJ:60,ISTP:60,ESFP:55,ESTP:55,INTJ:70,ENFJ:75},ENFP:{INTJ:95,INFJ:90,ENFJ:85,INFP:85,ENTP:80,ENTJ:80,INTP:75,ESFJ:70,ISFJ:70,ESFP:65,ISFP:65,ESTJ:60,ISTJ:60,ESTP:55,ISTP:55,ENFP:75},ISTJ:{ESFP:85,ESTP:80,ISFP:75,ISTP:75,ESTJ:75,ISFJ:70,ESFJ:70,INTJ:65,ENTJ:65,ENTP:60,INTP:60,ENFP:55,INFP:55,ENFJ:55,INFJ:50,ISTJ:70},ISFJ:{ESFP:90,ESTP:85,ENFP:80,ENTP:75,INFP:75,ESFJ:75,ISFP:70,ESTJ:70,ISTJ:70,ISTP:65,ENFJ:65,INFJ:60,ENTJ:55,INTJ:55,INTP:55,ISFJ:70},ESTJ:{ISFP:85,ISTP:80,ESFP:75,ESTP:75,ISTJ:75,ESFJ:70,ISFJ:70,ENTJ:65,INTJ:65,INTP:60,ENTP:60,INFP:55,ENFP:55,INFJ:55,ENFJ:50,ESTJ:70},ESFJ:{ISFP:90,ISTP:85,INFP:80,ENFP:75,INTP:75,ESFP:75,ISTJ:70,ESTJ:70,ISFJ:70,ESTP:65,INFJ:65,ENFJ:60,INTJ:55,ENTJ:55,ENTP:55,ESFJ:70},ISTP:{ESFJ:85,ESTJ:80,ISFJ:75,ISTJ:75,ESTP:75,ESFP:70,ISFP:70,ENTJ:65,ENTP:60,INTJ:60,INTP:60,ENFJ:55,INFJ:55,ENFP:55,INFP:50,ISTP:70},ISFP:{ENFJ:90,ESFJ:90,INFJ:85,ESTJ:80,ENTJ:75,ISTJ:75,ESFP:75,ISFJ:70,ESTP:70,ISTP:70,ENTP:65,INFP:65,ENFP:60,INTJ:55,INTP:50,ISFP:70},ESTP:{ISFJ:85,ISTJ:80,ESFJ:75,ESTJ:75,ISTP:75,ISFP:70,ESFP:70,ENTP:60,INTP:60,ENTJ:60,INTJ:55,INFP:55,ENFP:55,INFJ:55,ENFJ:50,ESTP:70},ESFP:{ISFJ:90,ISTJ:85,ESFJ:80,ENFJ:75,ESTJ:75,INFJ:75,ISFP:75,ESTP:70,ISTP:70,ENFP:65,INFP:65,ENTP:60,INTP:55,ENTJ:50,INTJ:50,ESFP:70}},d={INTJ:{name:"ì „ëµê°€",description:"ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ì „ëµì ì¸ ì‚¬ê³ ë¥¼ í•˜ëŠ” ê³„íšê°€"},INTP:{name:"ë…¼ë¦¬ìˆ ì‚¬",description:"í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¥¼ ê°€ì§„ ì§€ì  íƒêµ¬ì"},ENTJ:{name:"í†µì†”ì",description:"ëŒ€ë‹´í•˜ê³  ìƒìƒë ¥ì´ í’ë¶€í•œ ê°•ë ¥í•œ ì§€ë„ì"},ENTP:{name:"ë³€ë¡ ê°€",description:"ì§€ì  ë„ì „ì„ ì¦ê¸°ëŠ” ì˜ë¦¬í•œ ì•…ë§ˆì˜ ëŒ€ë³€ì¸"},INFJ:{name:"ì˜¹í˜¸ì",description:"ì´ìƒì£¼ì˜ì ì´ê³  ì›ì¹™ì£¼ì˜ì ì¸ ì„ ì˜ì˜ í™œë™ê°€"},INFP:{name:"ì¤‘ì¬ì",description:"ì´íƒ€ì ì´ê³  í•­ìƒ ì„ í•œ ë™ê¸°ë¡œ í–‰ë™í•˜ëŠ” ì‚¬ëŒ"},ENFJ:{name:"ì„ ë„ì",description:"ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ì˜ê°ì„ ì£¼ëŠ” ì§€ë„ì"},ENFP:{name:"í™œë™ê°€",description:"ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ììœ ë¡œìš´ ì˜í˜¼"},ISTJ:{name:"í˜„ì‹¤ì£¼ì˜ì",description:"ì‹¤ìš©ì ì´ê³  ì‚¬ì‹¤ì— ê¸°ë°˜í•œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒ"},ISFJ:{name:"ìˆ˜í˜¸ì",description:"í—Œì‹ ì ì´ê³  ë”°ëœ»í•œ ìˆ˜í˜¸ì"},ESTJ:{name:"ê²½ì˜ì",description:"ì§ˆì„œë¥¼ ì¤‘ì‹œí•˜ëŠ” í›Œë¥­í•œ ê´€ë¦¬ì"},ESFJ:{name:"ì§‘ì •ê´€",description:"ë°°ë ¤ì‹¬ì´ ë§ê³  ì‚¬êµì ì¸ í˜‘ë ¥ì"},ISTP:{name:"ì¥ì¸",description:"ëŒ€ë‹´í•˜ê³  ì‹¤ìš©ì ì¸ íƒí—˜ê°€"},ISFP:{name:"ëª¨í—˜ê°€",description:"ìœ ì—°í•˜ê³  ë§¤ë ¥ì ì¸ ì˜ˆìˆ ê°€"},ESTP:{name:"ì‚¬ì—…ê°€",description:"ì˜ë¦¬í•˜ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ëª¨í—˜ì„ ì¦ê¸°ëŠ” ì‚¬ëŒ"},ESFP:{name:"ì—°ì˜ˆì¸",description:"ì¦‰í¥ì ì´ê³  ì—´ì •ì ì¸ ì¦ê±°ì›€ì„ ì¶”êµ¬í•˜ëŠ” ì‚¬ëŒ"}},m={excellent:{title:"í™˜ìƒì˜ ê¶í•©",emoji:"ğŸ’–",color:"#ec4899"},good:{title:"ì¢‹ì€ ê¶í•©",emoji:"ğŸ’•",color:"#f472b6"},average:{title:"í‰ë²”í•œ ê¶í•©",emoji:"ğŸ’›",color:"#fbbf24"},challenging:{title:"ë…¸ë ¥ì´ í•„ìš”í•œ ê¶í•©",emoji:"ğŸ’™",color:"#60a5fa"}};function x(e,s){const t=e.toUpperCase(),l=s.toUpperCase();if(!c[t]||!c[l])return{score:50,level:"average",title:"ì•Œ ìˆ˜ ì—†ëŠ” ê¶í•©",description:"MBTI ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.",strengths:["ì„œë¡œë¥¼ ì•Œì•„ê°€ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤"],challenges:["MBTIë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”"],advice:"MBTI ê²€ì‚¬ë¥¼ í†µí•´ ì •í™•í•œ ìœ í˜•ì„ í™•ì¸í•˜ì„¸ìš”."};const a=c[t][l]||50;let i;i=a>=85?"excellent":a>=70?"good":a>=55?"average":"challenging";const r=((e,s,t)=>{let l;l=t>=85?"excellent":t>=70?"good":t>=55?"average":"challenging";const a={excellent:{strengths:["ì„œë¡œì˜ ë‹¤ë¥¸ ì ì´ ì™„ë²½í•˜ê²Œ ë³´ì™„ë©ë‹ˆë‹¤","ê¹Šì€ ì´í•´ì™€ ê³µê°ëŒ€ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤","í•¨ê»˜ ì„±ì¥í•˜ë©° ë°œì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤","ìì—°ìŠ¤ëŸ¬ìš´ ì¼€ë¯¸ìŠ¤íŠ¸ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤"],challenges:["ë„ˆë¬´ ë¹„ìŠ·í•´ì„œ ê°€ë” ì§€ë£¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì˜ ì•½ì ì„ ë³´ì™„í•˜ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤"],advice:"ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¡´ì¤‘í•˜ë©°, í•¨ê»˜ ì„±ì¥í•˜ëŠ” ë° ì§‘ì¤‘í•˜ì„¸ìš”. í›Œë¥­í•œ íŒŒíŠ¸ë„ˆì‹­ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!"},good:{strengths:["ì„œë¡œë¥¼ ì¡´ì¤‘í•˜ê³  ì´í•´í•©ë‹ˆë‹¤","ê±´ê°•í•œ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì—ê²Œ ê¸ì •ì ì¸ ì˜í–¥ì„ ì¤ë‹ˆë‹¤"],challenges:["ê°€ì¹˜ê´€ ì°¨ì´ë¡œ ì¸í•œ ì˜ê²¬ ì¶©ëŒì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì˜ ì†Œí†µ ë°©ì‹ì„ ì´í•´í•˜ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤","ë•Œë•Œë¡œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤"],advice:"ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ì†Œí†µí•˜ê³ , ì„œë¡œì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ë ¤ ë…¸ë ¥í•˜ì„¸ìš”. ì¢‹ì€ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."},average:{strengths:["ì„œë¡œì—ê²Œì„œ ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ë‹¤ì–‘í•œ ê´€ì ì„ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤"],challenges:["ì„±ê²© ì°¨ì´ë¡œ ì¸í•œ ê°ˆë“±ì´ ìì£¼ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œë¥¼ ì´í•´í•˜ëŠ” ë° ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤","ì†Œí†µì— ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤","ê°€ì¹˜ê´€ ì°¨ì´ë¥¼ ì¡°ìœ¨í•´ì•¼ í•©ë‹ˆë‹¤"],advice:"ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ì„œë¡œë¥¼ ì´í•´í•˜ë ¤ ë…¸ë ¥í•˜ì„¸ìš”. ì‹œê°„ê³¼ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ ì¢‹ì€ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."},challenging:{strengths:["ì„œë¡œì—ê²Œ ìƒˆë¡œìš´ ì‹œê°ì„ ì œê³µí•©ë‹ˆë‹¤","ë‹¤ì–‘ì„±ì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"],challenges:["ê·¼ë³¸ì ì¸ ê°€ì¹˜ê´€ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤","ì†Œí†µì´ ë§¤ìš° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤","ì„œë¡œì˜ í–‰ë™ì„ ì´í•´í•˜ê¸° í˜ë“­ë‹ˆë‹¤","ë§ì€ íƒ€í˜‘ê³¼ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤","ê°ˆë“±ì´ ìì£¼ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"],advice:"ì„œë¡œì˜ ê·¼ë³¸ì ì¸ ì°¨ì´ë¥¼ ì¸ì •í•˜ê³ , ì¡´ì¤‘í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê´€ê³„ ìœ ì§€ì— ìƒë‹¹í•œ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤."}}[l],i=d[e],r=d[s];return{title:m[l].title,description:`${i.name}(${e})ì™€ ${r.name}(${s})ì˜ ì¡°í•©ì…ë‹ˆë‹¤.`,strengths:a.strengths,challenges:a.challenges,advice:a.advice}})(t,l,a);return{score:a,level:i,...r}}function h(e){return m[e].color}function u(){const c=a(),d=i(),{user:u}=s(),N=d.state?.profile||d.state?.authorData,[b,p]=r.useState(!1),[f,g]=r.useState(!1),[j,S]=r.useState(!1),[I,T]=r.useState(!1),[E,J]=r.useState(0),[P,F]=r.useState(0),[v,w]=r.useState(!1),[y,k]=r.useState(null),[_,$]=r.useState(null),[C,q]=r.useState(!1),z=50,B=(()=>{const e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e).id}catch{return null}})(),M=B&&N?.id===B;r.useEffect(()=>{u||B||S(!0)},[u,B]),r.useEffect(()=>{(async()=>{if(!u?.id)return;const{data:s}=await e.from("users").select("coins, mbti").eq("id",u.id).single();s&&(J(s.coins||0),k(s.mbti||null))})()},[u?.id]);const U=(()=>{const e=[];return N?.profile_image&&e.push(N.profile_image),N?.photos&&Array.isArray(N.photos)&&N.photos.forEach(s=>{s&&!e.includes(s)&&e.push(s)}),0===e.length?[n(N?.gender||"")]:e})();if(!N)return c(-1),null;const A={school:N?.school||"",height:N?.height||"",bodyType:N?.bodyType||N?.body_type||"",style:N?.style||"",religion:N?.religion||"",mbti:N?.mbti||"",smoking:N?.smoking||"",drinking:N?.drinking||""},D=N?.interests||[],O=()=>{if(!y)return void alert("ë‚´ MBTI ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œí•„ì„ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”.");if(!N?.mbti)return void alert("ìƒëŒ€ë°©ì˜ MBTI ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");const e=x(y,N.mbti);$(e),w(!0)},G="female"===N?.gender||"ì—¬ì"===N?.gender,H=G?"from-rose-500 via-pink-500 to-fuchsia-500":"from-cyan-500 via-blue-500 to-indigo-500",K=G?"rose":"cyan";return t.jsxs("div",{className:"min-h-screen bg-slate-50 "+(j?"overflow-hidden":""),children:[t.jsxs("div",{className:""+(j?"blur-sm pointer-events-none":""),children:[t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-4",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},children:[t.jsx("button",{onClick:()=>{c(-1)},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:t.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),t.jsx("button",{onClick:()=>{window.confirm("ì´ ì‚¬ìš©ìë¥¼ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&alert("ì‹ ê³  ê¸°ëŠ¥ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.")},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:t.jsx("i",{className:"ri-more-2-fill text-white text-xl"})})]}),t.jsxs("div",{className:"relative w-full aspect-[3/4] max-h-[70vh] bg-slate-200 overflow-hidden",children:[t.jsx("img",{src:U[P],alt:`${N.name}`,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),t.jsx("button",{onClick:()=>{F(e=>0===e?U.length-1:e-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:t.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),t.jsx("button",{onClick:()=>{F(e=>e===U.length-1?0:e+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:t.jsx("i",{className:"ri-arrow-right-s-line text-white text-2xl"})}),U.length>1&&t.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 flex space-x-2 z-10",children:U.map((e,s)=>t.jsx("button",{onClick:e=>{e.stopPropagation(),F(s)},className:"w-2 h-2 rounded-full transition-all cursor-pointer shadow-sm "+(s===P?"bg-white w-4":"bg-white/50 hover:bg-white/80")},s))}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-10",children:t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-white mb-1 drop-shadow-lg",children:[N.name,", ",N.age||"??"]}),t.jsxs("div",{className:"flex items-center space-x-3 text-white/90",children:[N.location&&t.jsxs("span",{className:"flex items-center text-sm",children:[t.jsx("i",{className:"ri-map-pin-line mr-1"}),N.location]}),"ë¹„ê³µê°œ"!==A.school&&t.jsxs("span",{className:"flex items-center text-sm",children:[t.jsx("i",{className:"ri-graduation-cap-line mr-1"}),A.school]})]})]}),"ë¹„ê³µê°œ"!==A.mbti&&t.jsx("button",{onClick:O,className:`bg-gradient-to-r ${H} px-4 py-2 rounded-full shadow-lg hover:scale-105 transition-transform cursor-pointer`,children:t.jsx("span",{className:"text-white font-bold text-sm",children:A.mbti})})]})})]})]}),t.jsxs("div",{className:"px-4 py-6 space-y-4 pb-36",children:[N?.bio&&t.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:t.jsxs("p",{className:"text-slate-700 text-lg leading-relaxed whitespace-pre-wrap",children:['"',N.bio,'"']})}),t.jsxs("button",{onClick:O,className:`w-full bg-gradient-to-r ${H} rounded-3xl p-5 shadow-xl flex items-center justify-between hover:shadow-2xl hover:scale-[1.02] transition-all cursor-pointer group`,children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:t.jsx("span",{className:"text-3xl",children:"ğŸ’•"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"font-bold text-white text-lg block",children:"ìš°ë¦¬ì˜ ê¶í•©ì€?"}),t.jsxs("span",{className:"text-white/80 text-sm",children:[y||"?"," Ã— ",N?.mbti||"?"," ê¶í•© í™•ì¸í•˜ê¸°"]})]})]}),t.jsx("i",{className:"ri-arrow-right-s-line text-3xl text-white/80 group-hover:translate-x-1 transition-transform"})]}),D.length>0&&t.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[t.jsx("i",{className:`ri-heart-3-line mr-2 text-${K}-500`}),"ê´€ì‹¬ì‚¬"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:D.map((e,s)=>t.jsx("span",{className:`bg-${K}-50 text-${K}-600 px-4 py-2.5 rounded-full text-sm font-medium border border-${K}-100`,children:e},s))})]}),t.jsx("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm",children:t.jsx("div",{className:"grid grid-cols-2",children:[{icon:"ri-ruler-line",label:"í‚¤",value:A.height},{icon:"ri-body-scan-line",label:"ì²´í˜•",value:A.bodyType},{icon:"ri-t-shirt-line",label:"ìŠ¤íƒ€ì¼",value:A.style},{icon:"ri-moon-line",label:"ì¢…êµ",value:A.religion},{icon:"ri-fire-line",label:"í¡ì—°",value:A.smoking},{icon:"ri-goblet-line",label:"ìŒì£¼",value:A.drinking}].map((e,s)=>t.jsxs("div",{className:`p-4 ${s%2==0?"border-r border-slate-100":""} ${s<4?"border-b border-slate-100":""}`,children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("i",{className:`${e.icon} text-slate-400`}),t.jsx("span",{className:"text-xs text-slate-400",children:e.label})]}),t.jsx("span",{className:"font-semibold "+(e.value?"text-slate-700":"text-slate-300"),children:e.value||"-"})]},s))})})]}),!M&&t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white to-transparent px-6 py-4 flex justify-center items-center space-x-6",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:[t.jsx("button",{onClick:()=>{c(-1)},className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-110 transition-all cursor-pointer border-2 border-slate-200 group",children:t.jsx("i",{className:"ri-close-line text-slate-400 text-3xl group-hover:text-slate-600 transition-colors"})}),t.jsx("button",{onClick:()=>{u?.id&&N?.id?T(!0):S(!0)},disabled:C,className:`w-20 h-20 bg-gradient-to-r ${H} rounded-full flex items-center justify-center shadow-xl hover:shadow-2xl hover:scale-110 transition-all cursor-pointer disabled:opacity-70 ${C?"animate-pulse scale-110":""}`,children:t.jsx("i",{className:"ri-heart-fill text-white text-4xl "+(C?"animate-bounce":"")})}),t.jsx("button",{onClick:O,className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-110 transition-all cursor-pointer border-2 border-purple-200 group",children:t.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ğŸ’œ"})})]})]}),b&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:t.jsxs("div",{className:`bg-gradient-to-r ${H} text-white px-8 py-5 rounded-3xl shadow-2xl flex items-center space-x-3 animate-bounce`,children:[t.jsx("i",{className:"ri-heart-fill text-2xl"}),t.jsxs("span",{className:"font-bold text-lg",children:[N.name,"ë‹˜ì—ê²Œ í•˜íŠ¸ë¥¼ ë³´ëƒˆì–´ìš”!"]})]})}),I&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center animate-scale-in",children:[t.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${H} rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl`,children:t.jsx("i",{className:"ri-heart-fill text-white text-4xl"})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"í•˜íŠ¸ë¥¼ ë³´ë‚¼ê¹Œìš”?"}),t.jsxs("p",{className:"text-slate-600 mb-2",children:[t.jsx("span",{className:"font-bold",children:N.name}),"ë‹˜ì—ê²Œ",t.jsx("br",{}),"ë§ˆìŒì„ ì „í•˜ë ¤ë©´ ìì„ ",t.jsxs("span",{className:`font-bold text-${K}-500`,children:[z,"ê°œ"]}),"ê°€ í•„ìš”í•´ìš”"]}),t.jsx("div",{className:`bg-${K}-50 rounded-2xl p-4 mb-4`,children:t.jsxs("p",{className:`text-sm text-${K}-700 flex items-center justify-center`,children:[t.jsx("i",{className:"ri-refresh-line mr-2"}),"ê±°ì ˆ ì‹œ ìì„ì´ í™˜ë¶ˆë©ë‹ˆë‹¤"]})}),t.jsxs("p",{className:"text-slate-500 mb-6",children:["ë‚´ ìì„: ",t.jsxs("span",{className:"font-bold text-slate-800",children:[E,"ê°œ"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:async()=>{T(!1),q(!0);try{if(!u?.id||!N?.id)return void S(!0);if(E<z)return alert(`ìì„ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ ${E}ê°œ ë³´ìœ  ì¤‘`),void c("/coin-shop");const s=String(u.id),t=String(N.id);l.info("ë§¤ì¹­ ìš”ì²­ ì •ë³´",{fromUserId:s,toUserId:t});const{data:a}=await e.from("matching_requests").select("id").eq("from_user_id",t).eq("to_user_id",s).eq("status","pending").limit(1),i=a&&a.length>0,{data:r}=await e.from("matching_requests").select("id").eq("from_user_id",s).eq("to_user_id",t).limit(1);if(r&&r.length>0)return alert("ì´ë¯¸ ë§¤ì¹­ ìš”ì²­ì„ ë³´ë‚¸ ìƒëŒ€ì…ë‹ˆë‹¤"),void q(!1);const{error:n}=await e.from("users").update({coins:E-z}).eq("id",u.id);if(n)return l.error("ì½”ì¸ ì°¨ê° ì‹¤íŒ¨",n),alert("ìì„ ì°¨ê°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),void q(!1);J(e=>e-z);const{error:d}=await e.from("matching_requests").insert({from_user_id:s,to_user_id:t,status:i?"accepted":"pending"}).select();if(d){if("23505"===d.code)return alert("ì´ë¯¸ ë§¤ì¹­ ìš”ì²­ì„ ë³´ë‚¸ ìƒëŒ€ì…ë‹ˆë‹¤"),void q(!1);throw d}if(i){await e.from("matching_requests").update({status:"accepted"}).eq("from_user_id",t).eq("to_user_id",s);const{data:a,error:i}=await e.from("chat_rooms").insert({user1_id:s,user2_id:t,created_at:(new Date).toISOString()}).select().single();i&&l.error("ì±„íŒ…ë°© ìƒì„± ì‹¤íŒ¨",i),await e.from("notifications").insert([{user_id:t,type:"match_success",title:"ë§¤ì¹­ ì„±ì‚¬! ğŸ’•",message:`${u.name||"ëˆ„êµ°ê°€"}ë‹˜ê³¼ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤!`,data:{matched_user_id:s,chat_room_id:a?.id},read:!1},{user_id:s,type:"match_success",title:"ë§¤ì¹­ ì„±ì‚¬! ğŸ’•",message:`${N.name}ë‹˜ê³¼ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤!`,data:{matched_user_id:t,chat_room_id:a?.id},read:!1}]),await(async(e,s,t)=>o(e,{title:"ğŸ‰ ë§¤ì¹­ ì„±ì‚¬!",body:`${s}ë‹˜ê³¼ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤! ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.`,data:{type:"match_success",chat_room_id:t||""}}))(t,u.name||"ëˆ„êµ°ê°€",a?.id),q(!1),g(!0)}else await e.from("notifications").insert({user_id:t,type:"match_request",title:"ìƒˆë¡œìš´ ë§¤ì¹­ ìš”ì²­",message:`${u.name||"ëˆ„êµ°ê°€"}ë‹˜ì´ ë§¤ì¹­ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤`,data:{from_user_id:s,from_user_name:u.name},read:!1}),await(async(e,s,t)=>o(e,{title:"ğŸ’• ìƒˆë¡œìš´ ë§¤ì¹­ ìš”ì²­",body:`${s}ë‹˜ì´ ë§¤ì¹­ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤`,data:{type:"match_request",from_user_id:t}}))(t,u.name||"ëˆ„êµ°ê°€",s),q(!1),p(!0),setTimeout(()=>{p(!1),c(-1)},2e3)}catch(s){l.error("ë§¤ì¹­ ìš”ì²­ ì‹¤íŒ¨",s),alert("ë§¤ì¹­ ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+(s?.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜")),q(!1)}},disabled:E<z,className:`w-full bg-gradient-to-r ${H} text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed shadow-lg`,children:E<z?"ìì„ì´ ë¶€ì¡±í•´ìš”":"ğŸ’• í•˜íŠ¸ ë³´ë‚´ê¸°"}),t.jsx("button",{onClick:()=>T(!1),className:"w-full text-slate-500 py-3 font-medium hover:text-slate-700 transition-colors cursor-pointer",children:"ë‹¤ìŒì— í• ê²Œìš”"})]})]})}),f&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-center mb-6",children:[t.jsx("div",{className:"relative",children:t.jsx("img",{src:U[0],alt:N.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-xl"})}),t.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${H} rounded-full flex items-center justify-center -mx-4 z-10 shadow-xl`,children:t.jsx("span",{className:"text-3xl",children:"ğŸ’•"})}),t.jsx("div",{className:"relative",children:t.jsx("img",{src:u?.profile_image||n(""),alt:"ë‚˜",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-xl"})})]}),t.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"ë§¤ì¹­ ì„±ê³µ! ğŸ‰"}),t.jsxs("p",{className:"text-slate-600 mb-6",children:[N.name,"ë‹˜ê³¼ ì„œë¡œ ë§ˆìŒì´ í†µí–ˆì–´ìš”!",t.jsx("br",{}),"ì§€ê¸ˆ ë°”ë¡œ ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>{g(!1);const e=new CustomEvent("openChat",{detail:{userId:N.id,userName:N.name,userAvatar:U[0]||""}});window.dispatchEvent(e),c("/")},className:`w-full bg-gradient-to-r ${H} text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg`,children:"ğŸ’¬ ëŒ€í™” ì‹œì‘í•˜ê¸°"}),t.jsx("button",{onClick:()=>g(!1),className:"w-full text-slate-500 py-3 font-medium hover:text-slate-700 transition-colors cursor-pointer",children:"ë‚˜ì¤‘ì—"})]})]})}),j&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-md"}),t.jsxs("div",{className:"relative bg-white rounded-3xl p-8 max-w-sm w-full mx-4 text-center shadow-2xl animate-scale-in",children:[t.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${H} rounded-full flex items-center justify-center mx-auto mb-6`,children:t.jsx("i",{className:"ri-lock-line text-white text-4xl"})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”"}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["í”„ë¡œí•„ì„ í™•ì¸í•˜ê³ ",t.jsx("br",{}),"ë§¤ì¹­ì„ ì‹œì‘í•˜ë ¤ë©´ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”"]}),t.jsx("button",{onClick:()=>c("/login"),className:`w-full bg-gradient-to-r ${H} text-white py-4 rounded-full font-bold hover:opacity-90 transition-all shadow-lg cursor-pointer`,children:"ë¡œê·¸ì¸í•˜ê¸°"})]})]}),v&&_&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full max-h-[85vh] overflow-y-auto animate-scale-in relative",children:[t.jsx("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 w-10 h-10 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center transition-colors cursor-pointer z-10",children:t.jsx("i",{className:"ri-close-line text-xl text-slate-600"})}),t.jsxs("div",{className:"text-center mb-6 pt-2",children:[t.jsx("div",{className:"text-6xl mb-4",children:(L=_.level,m[L].emoji)}),t.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:_.title}),t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx("span",{className:"bg-purple-100 text-purple-600 px-4 py-2 rounded-full font-bold",children:y}),t.jsx("span",{className:"text-2xl",children:"Ã—"}),t.jsx("span",{className:"bg-pink-100 text-pink-600 px-4 py-2 rounded-full font-bold",children:N?.mbti})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-5 mb-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"text-slate-600 font-medium",children:"ê¶í•© ì ìˆ˜"}),t.jsxs("span",{className:"text-3xl font-bold",style:{color:h(_.level)},children:[_.score,"ì "]})]}),t.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:"h-4 rounded-full transition-all duration-1000",style:{width:`${_.score}%`,backgroundColor:h(_.level)}})})]}),t.jsx("p",{className:"text-slate-600 mb-5 bg-slate-50 p-4 rounded-2xl leading-relaxed",children:_.description}),t.jsxs("div",{className:"mb-5",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center text-lg",children:[t.jsx("span",{className:"text-green-500 mr-2",children:"ğŸ’š"})," ì´ëŸ° ì ì´ ì¢‹ì•„ìš”"]}),t.jsx("ul",{className:"space-y-2",children:_.strengths.slice(0,3).map((e,s)=>t.jsxs("li",{className:"text-slate-600 flex items-start bg-green-50 p-3 rounded-xl",children:[t.jsx("i",{className:"ri-check-line text-green-500 mr-2 mt-0.5"}),e]},s))})]}),t.jsxs("div",{className:"mb-5",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center text-lg",children:[t.jsx("span",{className:"text-amber-500 mr-2",children:"ğŸ’›"})," ì£¼ì˜í•  ì "]}),t.jsx("ul",{className:"space-y-2",children:_.challenges.slice(0,2).map((e,s)=>t.jsxs("li",{className:"text-slate-600 flex items-start bg-amber-50 p-3 rounded-xl",children:[t.jsx("i",{className:"ri-alert-line text-amber-500 mr-2 mt-0.5"}),e]},s))})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-4 mb-5",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-2 flex items-center",children:[t.jsx("span",{className:"mr-2",children:"ğŸ’¡"})," ì—°ì•  ê¿€íŒ"]}),t.jsx("p",{className:"text-slate-700",children:_.advice})]}),t.jsx("button",{onClick:()=>w(!1),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-full font-bold text-lg hover:opacity-90 transition-all cursor-pointer shadow-lg",children:"í™•ì¸"})]})}),t.jsx("style",{children:"\n        @keyframes scale-in {\n          0% { transform: scale(0.9); opacity: 0; }\n          100% { transform: scale(1); opacity: 1; }\n        }\n        .animate-scale-in {\n          animation: scale-in 0.3s ease-out;\n        }\n      "})]});var L}export{u as default};
