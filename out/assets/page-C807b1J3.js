import{u as e,j as t}from"./index-D-HdNcYp.js";import{e as s,r}from"./vendor-DkI5JUVe.js";import{s as a,a as l,v as n}from"./ssodaaSmsService-CE80kmQK.js";import"./supabase-DEy9n1le.js";function i(){const a=s(),{signInPhone:i,signUpPhone:c}=e(),[o,d]=r.useState(!0),[x,m]=r.useState(!1),[u,h]=r.useState(!1),[p,b]=r.useState({phoneNumber:"",password:"",confirmPassword:"",name:"",age:"",gender:"male"}),[g,f]=r.useState("input"),[y,j]=r.useState(""),[N,v]=r.useState(180),[w,k]=r.useState(!1),[C,X]=r.useState(!1),[S,$]=r.useState(!1),[P,A]=r.useState(!1),[L,q]=r.useState(!1),I=!1;r.useEffect(()=>{if("verify"===g&&N>0){const e=setInterval(()=>{v(e=>e<=1?(k(!0),0):e-1)},1e3);return()=>clearInterval(e)}},[g,N]);const M=e=>{const t=(e=>{const t=e.replace(/[^\d]/g,"").slice(0,11);return t.length<=3?t:t.length<=7?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7)}`})(e.target.value);b({...p,phoneNumber:t}),"input"!==g&&(f("input"),j(""))},z=e=>{const t=e.replace(/[^\d]/g,"");return 11===t.length&&t.startsWith("010")},D=async()=>{if(z(p.phoneNumber)){X(!0);try{let e;e=await l(p.phoneNumber),e?(f("verify"),v(180),k(!1),alert("인증번호가 전송되었습니다.")):alert("인증번호 발송에 실패했습니다.")}catch(e){alert(e.message||"SMS 발송에 실패했습니다.")}finally{X(!1)}}else alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)")},T=e=>{d(e),f("input"),j(""),v(180),k(!1),q(!1)};return u?t.jsx("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-4",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-3xl flex items-center justify-center shadow-lg mx-auto mb-8",children:t.jsx("img",{src:"/image/icon.png",alt:"Attract Logo",className:"w-20 h-20 object-contain"})}),t.jsx("div",{className:"w-10 h-10 border-4 border-cyan-100 border-t-cyan-500 rounded-full animate-spin mx-auto mb-6"}),t.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-1",children:"로그인 중"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"잠시만 기다려주세요"})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 via-sky-50 to-blue-50 flex items-center justify-center p-4",children:[t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("div",{className:"relative",children:t.jsx("img",{src:"/image/icon.png",alt:"Attract Logo",className:"w-20 h-20 rounded-2xl object-cover drop-shadow-lg"})})}),t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Attract"}),t.jsx("p",{className:"text-gray-600",children:"두근거리는 첫 만남처럼"})]}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[t.jsxs("div",{className:"flex bg-gray-100 rounded-full p-1 mb-6",children:[t.jsx("button",{onClick:()=>T(!0),className:"flex-1 py-3 rounded-full font-medium transition-all cursor-pointer whitespace-nowrap "+(o?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md":"text-gray-600"),children:"로그인"}),t.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-3 rounded-full font-medium transition-all cursor-pointer whitespace-nowrap "+(o?"text-gray-600":"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md"),children:"회원가입"})]}),I,o?t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{if(!p.phoneNumber||!p.password)return alert("전화번호와 비밀번호를 입력해주세요."),void m(!1);if(!z(p.phoneNumber))return alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)"),void m(!1);const e=p.phoneNumber.replace(/-/g,""),{error:t,profileCompleted:s}=await i(e,p.password);if(t)return alert(`로그인 실패: ${t.message}`),void m(!1);m(!1),s?(h(!0),setTimeout(()=>{a("/home")},1500)):a("/signup-profile",{state:{phoneNumber:e}})}catch(t){alert(`로그인 오류: ${t.message}`),m(!1)}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),t.jsx("input",{type:"tel",value:p.phoneNumber,onChange:M,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"010-1234-5678",maxLength:13})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"비밀번호"}),t.jsx("input",{type:"password",value:p.password,onChange:e=>b({...p,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"비밀번호를 입력하세요"})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"mr-2"}),t.jsx("span",{className:"text-gray-600",children:"로그인 상태 유지"})]}),t.jsx("button",{type:"button",onClick:()=>a("/support"),className:"text-cyan-500 hover:text-cyan-600 cursor-pointer whitespace-nowrap",children:"비밀번호 찾기"})]}),t.jsx("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-4 rounded-xl font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:x?"로그인 중...":"로그인"})]}):t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),p.phoneNumber)if(z(p.phoneNumber))if("verified"===g)if(L)if(p.name)if(p.age)if(p.gender&&""!==p.gender)if(p.password===p.confirmPassword)if(p.password.length<8)alert("비밀번호는 8자 이상이어야 합니다.");else{m(!0);try{const e=p.phoneNumber.replace(/-/g,""),{error:t}=await c(e,p.password,{name:p.name,age:parseInt(p.age),gender:p.gender});if(t)return void alert(`회원가입 실패: ${t.message}`);alert("회원가입이 완료되었습니다! 프로필을 완성해주세요."),a("/signup-profile",{state:{phoneNumber:e}})}catch(t){alert(`회원가입 오류: ${t.message}`)}finally{m(!1)}}else alert("비밀번호가 일치하지 않습니다.");else alert("성별을 선택해주세요.");else alert("나이를 입력해주세요.");else alert("이름을 입력해주세요.");else alert("이용약관 및 개인정보처리방침에 동의해주세요.");else alert("전화번호 인증을 완료해주세요.");else alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)");else alert("전화번호를 입력해주세요.")},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["전화번호 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"tel",required:!0,value:p.phoneNumber,onChange:M,disabled:"verified"===g,className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm "+("verified"===g?"bg-gray-100":""),placeholder:"010-1234-5678",maxLength:13}),"input"===g&&t.jsx("button",{type:"button",onClick:D,disabled:C||!z(p.phoneNumber),className:"px-4 py-3 bg-cyan-500 text-white rounded-xl font-medium hover:bg-cyan-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap text-sm",children:C?"전송중...":"인증"}),"verified"===g&&t.jsxs("div",{className:"flex items-center px-3 py-3 bg-green-100 text-green-700 rounded-xl font-medium whitespace-nowrap text-xs",children:[t.jsx("i",{className:"ri-check-line"}),"완료"]})]})]}),"verify"===g&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"인증번호 *"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:y,onChange:e=>j(e.target.value.replace(/[^\d]/g,"").slice(0,6)),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-center tracking-widest text-sm",placeholder:"000000",maxLength:6}),t.jsx("button",{type:"button",onClick:async()=>{if(6===y.length){m(!0);try{await n(p.phoneNumber,y)?(f("verified"),alert("전화번호 인증이 완료되었습니다!")):alert("인증번호가 일치하지 않거나 만료되었습니다.")}catch(e){alert("인증 확인 중 오류가 발생했습니다.")}finally{m(!1)}}else alert("인증번호 6자리를 입력해주세요.")},disabled:6!==y.length,className:"px-4 py-3 border border-gray-200 rounded-xl font-medium hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap text-sm text-gray-700",children:"확인"})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs mt-2 text-gray-500",children:[t.jsx("p",{className:N>0?"text-gray-500":"text-red-500",children:N>0?"남은 시간: "+(B=N,`${Math.floor(B/60)}:${(B%60).toString().padStart(2,"0")}`):"인증번호가 만료되었습니다"}),t.jsx("button",{type:"button",onClick:async()=>{w&&await D()},disabled:!w||C,className:"text-cyan-500 hover:text-cyan-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"재전송"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["이름 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:p.name,onChange:e=>b({...p,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"이름을 입력하세요"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["나이 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",required:!0,min:"19",max:"99",value:p.age,onChange:e=>b({...p,age:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"나이"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["성별 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{required:!0,value:p.gender,onChange:e=>b({...p,gender:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm pr-8",children:[t.jsx("option",{value:"",children:"성별을 선택하세요"}),t.jsx("option",{value:"male",children:"남성"}),t.jsx("option",{value:"female",children:"여성"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"password",required:!0,minLength:8,value:p.password,onChange:e=>b({...p,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"8자 이상 입력하세요"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 확인 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"password",required:!0,minLength:8,value:p.confirmPassword,onChange:e=>b({...p,confirmPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"비밀번호를 다시 입력하세요"})]}),t.jsxs("label",{className:"flex items-start cursor-pointer text-sm",children:[t.jsx("input",{type:"checkbox",className:"mt-1 mr-2",checked:L,onChange:e=>q(e.target.checked)}),t.jsxs("span",{className:"text-gray-600",children:[t.jsx("button",{type:"button",onClick:()=>$(!0),className:"text-cyan-500 hover:underline",children:"이용약관"})," 및 ",t.jsx("button",{type:"button",onClick:()=>A(!0),className:"text-cyan-500 hover:underline",children:"개인정보처리방침"}),"에 동의합니다"]})]}),t.jsx("button",{type:"submit",disabled:x||"verified"!==g,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-4 rounded-xl font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:x?"가입 중...":"회원가입"})]})]}),t.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:t.jsxs("p",{children:["문제가 있으신가요?"," ",t.jsx("button",{onClick:()=>a("/support"),className:"text-cyan-500 hover:text-cyan-600 cursor-pointer whitespace-nowrap",children:"고객센터"})]})}),t.jsxs("div",{className:"text-center mt-8 pt-6 border-t border-gray-200 text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:"Attract (어트랙트)"}),t.jsx("p",{children:"대표: 최윤석 | 사업자등록번호: 576-18-02378"}),t.jsx("p",{children:"주소: 서울특별시 강서구 마곡중앙1로 71"}),t.jsx("p",{children:"이메일: cys7204086@naver.com| 전화: 010-3150-4086"}),t.jsx("p",{className:"mt-2",children:"© 2024 Attract. All rights reserved."})]})]}),S&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>$(!1),children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"이용약관"}),t.jsx("button",{onClick:()=>$(!1),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:t.jsx("i",{className:"ri-close-line text-xl text-gray-500"})})]}),t.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] text-sm text-gray-600 space-y-4",children:[t.jsx("h4",{className:"font-bold text-gray-800",children:"제1조 (목적)"}),t.jsx("p",{children:'이 약관은 Attract(이하 "회사")가 제공하는 소개팅 서비스(이하 "서비스")의 이용조건 및 절차, 회사와 회원 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.'}),t.jsx("h4",{className:"font-bold text-gray-800",children:"제2조 (용어의 정의)"}),t.jsx("p",{children:'1. "서비스"란 회사가 제공하는 모든 소개팅 관련 서비스를 의미합니다.'}),t.jsx("p",{children:'2. "회원"이란 이 약관에 동의하고 서비스를 이용하는 자를 말합니다.'}),t.jsx("p",{children:'3. "코인"이란 서비스 내에서 사용되는 가상화폐를 의미합니다.'}),t.jsx("h4",{className:"font-bold text-gray-800",children:"제3조 (약관의 효력)"}),t.jsx("p",{children:"이 약관은 서비스를 이용하고자 하는 모든 회원에게 적용됩니다."}),t.jsx("h4",{className:"font-bold text-gray-800",children:"제4조 (서비스 이용)"}),t.jsx("p",{children:"1. 회원은 만 19세 이상이어야 합니다."}),t.jsx("p",{children:"2. 회원은 본인 인증을 완료해야 서비스를 이용할 수 있습니다."}),t.jsx("p",{children:"3. 허위 정보를 입력할 경우 서비스 이용이 제한될 수 있습니다."}),t.jsx("h4",{className:"font-bold text-gray-800",children:"제5조 (결제 및 환불)"}),t.jsx("p",{children:"1. 코인 구매 후 사용하지 않은 코인은 구매일로부터 7일 이내에 환불 가능합니다."}),t.jsx("p",{children:"2. 이미 사용된 코인은 환불되지 않습니다."}),t.jsx("h4",{className:"font-bold text-gray-800",children:"제6조 (면책조항)"}),t.jsx("p",{children:"회사는 회원 간의 만남으로 인해 발생하는 문제에 대해 책임지지 않습니다."})]}),t.jsx("div",{className:"p-4 border-t border-gray-100",children:t.jsx("button",{onClick:()=>$(!1),className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-medium",children:"확인"})})]})}),P&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>A(!1),children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"개인정보처리방침"}),t.jsx("button",{onClick:()=>A(!1),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:t.jsx("i",{className:"ri-close-line text-xl text-gray-500"})})]}),t.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] text-sm text-gray-600 space-y-4",children:[t.jsx("h4",{className:"font-bold text-gray-800",children:"1. 수집하는 개인정보 항목"}),t.jsx("p",{children:"회사는 서비스 제공을 위해 다음과 같은 개인정보를 수집합니다:"}),t.jsx("p",{children:"- 필수: 이름, 휴대폰번호, 성별, 나이"}),t.jsx("p",{children:"- 선택: 프로필 사진, 지역, 학교/직장, MBTI, 관심사"}),t.jsx("h4",{className:"font-bold text-gray-800",children:"2. 개인정보 수집 목적"}),t.jsx("p",{children:"- 회원 식별 및 본인 인증"}),t.jsx("p",{children:"- 매칭 서비스 제공"}),t.jsx("p",{children:"- 서비스 개선 및 신규 서비스 개발"}),t.jsx("p",{children:"- 불량 회원 관리"}),t.jsx("h4",{className:"font-bold text-gray-800",children:"3. 개인정보 보유 기간"}),t.jsx("p",{children:"회원 탈퇴 시까지 보유하며, 탈퇴 후 즉시 파기합니다. 단, 관련 법령에 따라 일정 기간 보관이 필요한 경우 해당 기간 동안 보관합니다."}),t.jsx("h4",{className:"font-bold text-gray-800",children:"4. 개인정보의 제3자 제공"}),t.jsx("p",{children:"회사는 원칙적으로 회원의 개인정보를 제3자에게 제공하지 않습니다. 다만, 회원의 동의가 있거나 법령에 의한 경우는 예외로 합니다."}),t.jsx("h4",{className:"font-bold text-gray-800",children:"5. 회원의 권리"}),t.jsx("p",{children:"회원은 언제든지 자신의 개인정보를 조회, 수정, 삭제할 수 있으며, 회원 탈퇴를 요청할 수 있습니다."}),t.jsx("h4",{className:"font-bold text-gray-800",children:"6. 연락처"}),t.jsx("p",{children:"개인정보 관련 문의: support@attract.com"})]}),t.jsx("div",{className:"p-4 border-t border-gray-100",children:t.jsx("button",{onClick:()=>A(!1),className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-medium",children:"확인"})})]})})]});var B}export{i as default};
