import{j as e}from"./index-0bpRGtBK.js";import{u as s,r as l}from"./vendor-DiTsd9F_.js";import{getFunctions as t,httpsCallable as a}from"./index.esm-coVGxiqR.js";import"./supabase-F6L96wRu.js";function r(){const r=s(),[i,d]=l.useState(""),[c,n]=l.useState(""),[x,o]=l.useState(""),[m,h]=l.useState(!1),[u,j]=l.useState(null),[p,g]=l.useState("info");return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsx("button",{onClick:()=>{r(-1)},className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors cursor-pointer",disabled:m,children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("h1",{className:"text-lg font-bold",children:"개인정보 삭제 요청"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("div",{className:"px-4 py-6",children:["info"===p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-delete-bin-line text-2xl text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"개인정보 삭제 안내"}),e.jsx("p",{className:"text-sm text-gray-500",children:"계정과 모든 개인정보를 영구적으로 삭제합니다"})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-information-line text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"삭제되는 정보"}),e.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"프로필 정보 (이름, 나이, 사진 등)"}),e.jsx("li",{children:"매칭 요청 및 수락 내역"}),e.jsx("li",{children:"커뮤니티 게시글 및 댓글"}),e.jsx("li",{children:"채팅 내역"}),e.jsx("li",{children:"알림 내역"}),e.jsx("li",{children:"계정 정보"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-alert-line text-orange-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"주의사항"}),e.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"삭제된 정보는 복구할 수 없습니다"}),e.jsx("li",{children:"보유 중인 코인은 환불되지 않습니다"}),e.jsx("li",{children:"법적 보관 의무가 있는 결제 내역은 보관됩니다"}),e.jsx("li",{children:"본인 확인을 위해 전화번호와 비밀번호가 필요합니다"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-time-line text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"처리 기간"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"요청 즉시 처리되며, 모든 데이터는 영구적으로 삭제됩니다."})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-2xl p-4 border border-blue-100",children:e.jsxs("p",{className:"text-xs text-blue-800 leading-relaxed",children:[e.jsx("strong",{children:"개인정보보호법 제36조(개인정보의 정정·삭제 요구권)"}),"에 따라 개인정보의 삭제를 요구할 권리가 있습니다. 삭제 요청 시 관련 법령에 따라 보관이 필요한 정보를 제외하고 모두 삭제됩니다."]})}),e.jsx("button",{onClick:()=>{"info"===p&&g("confirm")},className:"w-full bg-red-600 text-white py-4 rounded-2xl font-semibold hover:bg-red-700 transition-colors",children:"계속하기"})]}),"confirm"===p&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 space-y-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-alert-line text-3xl text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"정말 삭제하시겠습니까?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"이 작업은 되돌릴 수 없습니다. 모든 개인정보가 영구적으로 삭제됩니다."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"전화번호"}),e.jsx("input",{type:"tel",value:i,onChange:e=>{const s=(e=>{const s=e.replace(/[^\d]/g,"").slice(0,11);return s.length<=3?s:s.length<=7?`${s.slice(0,3)}-${s.slice(3)}`:`${s.slice(0,3)}-${s.slice(3,7)}-${s.slice(7)}`})(e.target.value);d(s)},placeholder:"010-1234-5678",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500",disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"비밀번호 확인"}),e.jsx("input",{type:"password",value:c,onChange:e=>n(e.target.value),placeholder:"비밀번호를 입력하세요",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500",disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["확인을 위해 ",e.jsx("strong",{className:"text-red-600",children:'"삭제합니다"'}),"를 입력하세요"]}),e.jsx("input",{type:"text",value:x,onChange:e=>o(e.target.value),placeholder:"삭제합니다",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500",disabled:m})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-red-800",children:u})}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsx("button",{onClick:async()=>{if(i&&c)if("삭제합니다"===x){h(!0),j(null),g("processing");try{const e=i.replace(/-/g,""),s=t(),l=a(s,"deleteUserData"),d=await l({phoneNumber:e,password:c});if(!d.data||!d.data.success)throw new Error(d.data?.error||"개인정보 삭제에 실패했습니다.");r("/data-deletion/complete",{replace:!0})}catch(e){j(e.message||"개인정보 삭제 중 오류가 발생했습니다."),g("confirm"),h(!1)}}else j("확인 텍스트를 정확히 입력해주세요.");else j("전화번호와 비밀번호를 입력해주세요.")},disabled:m||!i||!c||"삭제합니다"!==x,className:"w-full bg-red-600 text-white py-4 rounded-2xl font-semibold hover:bg-red-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:m?"삭제 중...":"개인정보 삭제하기"}),e.jsx("button",{onClick:()=>g("info"),disabled:m,className:"w-full bg-gray-100 text-gray-700 py-4 rounded-2xl font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:"취소"})]})]})}),"processing"===p&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx("i",{className:"ri-loader-4-line text-3xl text-red-600 animate-spin"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"개인정보 삭제 중..."}),e.jsx("p",{className:"text-sm text-gray-600",children:"잠시만 기다려주세요. 모든 데이터를 안전하게 삭제하고 있습니다."})]})]})]})}export{r as default};
