import{u as e,j as t,h as r,f as s,r as l,s as a,a as n,g as i}from"./index-CkhljOBK.js";import{u as o,r as d}from"./vendor-Dma7sgzX.js";import{s as c,K as p,g as x}from"./schools-BXrPHggY.js";function u(){const u=o(),{setUser:g}=e(),[m,h]=d.useState({name:"",phoneNumber:"",password:"",age:"",gender:"",location:"",bio:"",mbti:"",school:"",height:"",bodyType:"",style:"",religion:"",smoking:"",drinking:""}),[b,y]=d.useState(null),[f,j]=d.useState(""),[v,N]=d.useState(!1),[w,k]=d.useState([]),[C,S]=d.useState(""),[_,T]=d.useState(""),[I,$]=d.useState(""),[E,F]=d.useState([]),J=e=>{const{name:t,value:r}=e.target;h(e=>({...e,[t]:r}))},P=()=>{C.trim()&&!w.includes(C.trim())&&(k([...w,C.trim()]),S(""))};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50 py-4 px-4",children:t.jsxs("div",{className:"w-full max-w-md mx-auto",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-rose-600 bg-clip-text text-transparent mb-1",children:"âš¡ ë¹ ë¥¸ íšŒì›ê°€ì…"}),t.jsx("p",{className:"text-xs text-gray-500",children:"í…ŒìŠ¤íŠ¸ìš© ìœ ë ¹ íšŒì› ìƒì„± (ëª¨ë“  í•„ë“œ)"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-sm font-bold text-gray-800",children:"ğŸ‘» ìœ ë ¹ íšŒì› ì •ë³´"}),t.jsx("button",{type:"button",onClick:()=>u("/login"),className:"text-xs text-gray-500 hover:text-gray-700",children:"â† ëŒì•„ê°€ê¸°"})]}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),m.name.trim())if(!m.phoneNumber||m.phoneNumber.length<13)alert("ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");else if(!m.password||m.password.length<4)alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");else if(m.gender)if(b){N(!0);try{const e=await(async()=>{if(!b)return null;try{const e=b.name.split(".").pop(),t=`${Date.now()}_${Math.random().toString(36).substring(7)}.${e}`,r=l(a,`avatars/${t}`);return await n(r,b),await i(r)}catch(c){return null}})();if(!e)return alert("ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),void N(!1);const t=m.phoneNumber.replace(/[^\d]/g,""),o=await r(m.password),{user:d,error:c}=await s.users.createUser({firebase_uid:"",phone_number:t,password_hash:o,name:m.name.trim(),age:m.age?parseInt(m.age):void 0,gender:m.gender,location:m.location.trim()||void 0,bio:m.bio.trim()||void 0,mbti:m.mbti.toUpperCase()||void 0,school:m.school.trim()||void 0,height:m.height||void 0,body_type:m.bodyType||void 0,style:m.style||void 0,religion:m.religion||void 0,smoking:m.smoking||void 0,drinking:m.drinking||void 0,interests:w.length>0?w:void 0,profile_image:e,avatar_url:e,is_ghost:!0,profile_completed:!0,created_at:(new Date).toISOString()});if(c)return alert("íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),void N(!1);if(d){const e={id:d.id,phone_number:d.phone_number,name:d.name,profile_image:d.profile_image,profile_completed:!0};g(e),localStorage.setItem("auth_user",JSON.stringify(e))}alert(`íšŒì›ê°€ì… ì™„ë£Œ!\n${m.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!`),u("/"),h({name:"",phoneNumber:"",password:"",age:"",gender:"",location:"",bio:"",mbti:"",school:"",height:"",bodyType:"",style:"",religion:"",smoking:"",drinking:""}),y(null),j(""),k([])}catch(t){alert("íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{N(!1)}}else alert("í”„ë¡œí•„ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.");else alert("ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");else alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")},className:"space-y-3",children:[t.jsx("div",{className:"flex justify-center mb-2",children:f?t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:f,alt:"ë¯¸ë¦¬ë³´ê¸°",className:"w-20 h-20 object-cover rounded-full border-2 border-purple-300"}),t.jsx("button",{type:"button",onClick:()=>{y(null),j("")},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:"âœ•"})]}):t.jsxs("label",{className:"w-20 h-20 bg-purple-50 border-2 border-dashed border-purple-300 rounded-full flex flex-col items-center justify-center cursor-pointer hover:bg-purple-100",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];if(!t)return;if(t.size>5242880)return void alert("íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");if(!t.type.startsWith("image/"))return void alert("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");y(t);const r=new FileReader;r.onloadend=()=>{j(r.result)},r.readAsDataURL(t)},className:"hidden"}),t.jsx("i",{className:"ri-camera-line text-purple-500 text-lg"}),t.jsx("span",{className:"text-[10px] text-purple-600",children:"ì‚¬ì§„*"})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",name:"name",value:m.name,onChange:J,placeholder:"ì´ë¦„ *",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),t.jsx("input",{type:"number",name:"age",value:m.age,onChange:J,placeholder:"ë‚˜ì´",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",min:"18",max:"100"})]}),t.jsx("input",{type:"tel",name:"phoneNumber",value:m.phoneNumber,onChange:e=>{const t=(e=>{const t=e.replace(/[^\d]/g,"");return t.length<=3?t:t.length<=7?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7,11)}`})(e.target.value);h(e=>({...e,phoneNumber:t}))},placeholder:"ì „í™”ë²ˆí˜¸ * (010-1234-5678)",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:13,required:!0}),t.jsx("input",{type:"password",name:"password",value:m.password,onChange:J,placeholder:"ë¹„ë°€ë²ˆí˜¸ * (4ì ì´ìƒ)",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",minLength:4,required:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{type:"button",onClick:()=>h(e=>({...e,gender:"male"})),className:"py-2 rounded-lg text-sm font-medium transition-all "+("male"===m.gender?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:"ë‚¨ì"}),t.jsx("button",{type:"button",onClick:()=>h(e=>({...e,gender:"female"})),className:"py-2 rounded-lg text-sm font-medium transition-all "+("female"===m.gender?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:"ì—¬ì"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"í•™êµ/ì§ì—…"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:I||m.school,onChange:e=>{$(e.target.value),F(c(e.target.value,5))},placeholder:"í•™êµ ë˜ëŠ” ì§ì—… ê²€ìƒ‰",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),E.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:E.map(e=>t.jsx("button",{type:"button",onClick:()=>{h(t=>({...t,school:e})),$(""),F([])},className:"w-full px-3 py-2 text-left text-sm hover:bg-purple-50 border-b border-gray-100 last:border-b-0",children:e},e))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:_,onChange:e=>{T(e.target.value),h(e=>({...e,location:""}))},className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white appearance-none",children:[t.jsx("option",{value:"",children:"ì‹œ/ë„ ì„ íƒ"}),p.map(e=>t.jsx("option",{value:e.sido,children:e.sido.replace("íŠ¹ë³„ì‹œ","").replace("ê´‘ì—­ì‹œ","").replace("íŠ¹ë³„ìì¹˜ì‹œ","").replace("íŠ¹ë³„ìì¹˜ë„","").replace("ë„","")},e.sido))]}),t.jsx("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none text-sm"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:m.location&&m.location.split(" ")[1]||"",onChange:e=>h(t=>({...t,location:_?`${_} ${e.target.value}`:""})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white appearance-none",disabled:!_,children:[t.jsx("option",{value:"",children:"êµ¬/êµ° ì„ íƒ"}),_&&x(_).map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none text-sm"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"MBTI"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:["INTJ","INTP","ENTJ","ENTP","INFJ","INFP","ENFJ","ENFP","ISTJ","ISFJ","ESTJ","ESFJ","ISTP","ISFP","ESTP","ESFP"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,mbti:e})),className:"px-2 py-1 rounded text-xs transition-all "+(m.mbti===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"í‚¤"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:["150~155","155~160","160~165","165~170","170~175","175~180","180~185","185~190"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,height:e})),className:"px-2 py-1 rounded text-xs transition-all "+(m.height===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ì²´í˜•"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:["ë§ˆë¥¸","ë³´í†µ","í†µí†µ","ê·¼ìœ¡ì§ˆ","ê±´ì¥í•œ"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,bodyType:e})),className:"px-2 py-1 rounded text-xs transition-all "+(m.bodyType===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ìŠ¤íƒ€ì¼"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:["ìºì£¼ì–¼","ìŠ¤í¬í‹°","ëª¨ë˜","í´ë˜ì‹","ìŠ¤íŠ¸ë¦¿","í˜ë¯¸ë‹Œ"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,style:e})),className:"px-2 py-1 rounded text-xs transition-all "+(m.style===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ì¢…êµ"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:["ë¬´êµ","ê¸°ë…êµ","ì²œì£¼êµ","ë¶ˆêµ","ì›ë¶ˆêµ","ê¸°íƒ€"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,religion:e})),className:"px-2 py-1 rounded text-xs transition-all "+(m.religion===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"í¡ì—°"}),t.jsx("div",{className:"flex gap-1",children:["ë¹„í¡ì—°","í¡ì—°"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,smoking:e})),className:"px-2 py-1 rounded text-xs flex-1 transition-all "+(m.smoking===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ìŒì£¼"}),t.jsx("div",{className:"flex gap-1",children:["ì•ˆ ë§ˆì‹¬","ê°€ë”","ìì£¼"].map(e=>t.jsx("button",{type:"button",onClick:()=>h(t=>({...t,drinking:e})),className:"px-2 py-1 rounded text-xs flex-1 transition-all "+(m.drinking===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"),children:e},e))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ê´€ì‹¬ì‚¬"}),t.jsxs("div",{className:"flex gap-1 mb-1",children:[t.jsx("input",{type:"text",value:C,onChange:e=>S(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),P())},placeholder:"ê´€ì‹¬ì‚¬ ì…ë ¥ í›„ ì¶”ê°€",className:"flex-1 px-2 py-1.5 border border-gray-200 rounded text-xs focus:outline-none focus:ring-2 focus:ring-purple-500"}),t.jsx("button",{type:"button",onClick:P,className:"px-3 py-1.5 bg-purple-500 text-white rounded text-xs hover:bg-purple-600",children:"ì¶”ê°€"})]}),w.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:w.map((e,r)=>t.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs flex items-center gap-1",children:[e," ",t.jsx("button",{type:"button",onClick:()=>k(w.filter((e,t)=>t!==r)),className:"text-purple-500 hover:text-purple-700",children:"Ã—"})]},r))})]}),t.jsx("textarea",{name:"bio",value:m.bio,onChange:J,placeholder:"ìê¸°ì†Œê°œ",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-purple-500",rows:2,maxLength:200}),t.jsx("button",{type:"submit",disabled:v||!m.name.trim()||!m.phoneNumber||!m.gender||!m.password||!b,className:"w-full bg-gradient-to-r from-purple-500 to-rose-500 text-white py-3 rounded-xl font-medium hover:from-purple-600 hover:to-rose-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:v?"ê°€ì… ì¤‘...":"ğŸ‘» ìœ ë ¹ íšŒì› ìƒì„±"})]})]})]})})}export{u as default};
