import{u as e,j as s}from"./index-CkhljOBK.js";import{u as t,a,r}from"./vendor-Dma7sgzX.js";import{s as l,v as n}from"./ssodaaSmsService-DdzuzAKp.js";function o(){const o=t(),i=a(),{signInPhone:c,signUpPhone:d}=e(),m=i.state?.from?.pathname||"/",[u,x]=r.useState(!0),[p,h]=r.useState(!1),[g,b]=r.useState({phoneNumber:"",password:"",confirmPassword:"",name:"",age:"",gender:"male"}),[f,y]=r.useState(""),[j,N]=r.useState(!1),[w,v]=r.useState(!1),[k,C]=r.useState(!1),[X,S]=r.useState(!1),$=e=>{const s=(e=>{const s=e.replace(/[^\d]/g,"").slice(0,11);return s.length<=3?s:s.length<=7?`${s.slice(0,3)}-${s.slice(3)}`:`${s.slice(0,3)}-${s.slice(3,7)}-${s.slice(7)}`})(e.target.value);b({...g,phoneNumber:s})},q=e=>{const s=e.replace(/[^\d]/g,"");return 11===s.length&&s.startsWith("010")};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 via-sky-50 to-blue-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"relative",children:s.jsx("img",{src:"/image/icon.png",alt:"Attract Logo",className:"w-20 h-20 rounded-2xl object-cover drop-shadow-lg"})})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Attract"}),s.jsx("p",{className:"text-gray-600",children:"두근거리는 첫 만남처럼"})]}),s.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[s.jsxs("div",{className:"flex bg-gray-100 rounded-full p-1 mb-6",children:[s.jsx("button",{onClick:()=>x(!0),className:"flex-1 py-3 rounded-full font-medium transition-all cursor-pointer whitespace-nowrap "+(u?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md":"text-gray-600"),children:"로그인"}),s.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-3 rounded-full font-medium transition-all cursor-pointer whitespace-nowrap "+(u?"text-gray-600":"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md"),children:"회원가입"})]}),u?s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{if(!g.phoneNumber||!g.password)return alert("전화번호와 비밀번호를 입력해주세요."),void h(!1);if(!q(g.phoneNumber))return alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)"),void h(!1);const e=g.phoneNumber.replace(/-/g,""),{error:s,profileCompleted:t}=await c(e,g.password);if(s)return alert(`로그인 실패: ${s.message}`),void h(!1);t?o(m,{replace:!0}):o("/signup-profile",{state:{phoneNumber:e}})}catch(s){alert(`로그인 오류: ${s.message}`)}finally{h(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),s.jsx("input",{type:"tel",value:g.phoneNumber,onChange:$,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"010-1234-5678",maxLength:13})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"비밀번호"}),s.jsx("input",{type:"password",value:g.password,onChange:e=>b({...g,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"비밀번호를 입력하세요"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"mr-2"}),s.jsx("span",{className:"text-gray-600",children:"로그인 상태 유지"})]}),s.jsx("button",{type:"button",onClick:()=>o("/support"),className:"text-cyan-500 hover:text-cyan-600 cursor-pointer whitespace-nowrap",children:"비밀번호 찾기"})]}),s.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-4 rounded-xl font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:p?"로그인 중...":"로그인"})]}):s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g.phoneNumber)if(q(g.phoneNumber))if(w)if(g.name)if(g.age)if(g.gender&&""!==g.gender)if(g.password===g.confirmPassword)if(g.password.length<8)alert("비밀번호는 8자 이상이어야 합니다.");else{h(!0);try{const e=g.phoneNumber.replace(/-/g,""),{error:s}=await d(e,g.password,{name:g.name,age:parseInt(g.age),gender:g.gender});if(s)return void alert(`회원가입 실패: ${s.message}`);alert("회원가입이 완료되었습니다! 프로필을 완성해주세요."),o("/signup-profile",{state:{phoneNumber:e}})}catch(s){alert(`회원가입 오류: ${s.message}`)}finally{h(!1)}}else alert("비밀번호가 일치하지 않습니다.");else alert("성별을 선택해주세요.");else alert("나이를 입력해주세요.");else alert("이름을 입력해주세요.");else alert("전화번호 인증을 완료해주세요.");else alert("올바른 전화번호 형식이 아닙니다. (010-XXXX-XXXX)");else alert("전화번호를 입력해주세요.")},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["전화번호 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"tel",required:!0,value:g.phoneNumber,onChange:$,className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"010-1234-5678",maxLength:13,disabled:w}),s.jsx("button",{type:"button",onClick:async()=>{if(g.phoneNumber&&q(g.phoneNumber)){C(!0);try{await l(g.phoneNumber)?(N(!0),alert("인증번호가 발송되었습니다. 3분 내에 입력해주세요.")):alert("인증번호 발송에 실패했습니다. 다시 시도해주세요.")}catch(e){alert(`인증번호 발송 실패: ${e.message||"알 수 없는 오류"}`)}finally{C(!1)}}else alert("올바른 전화번호를 입력해주세요.")},disabled:!g.phoneNumber||!q(g.phoneNumber)||k||w,className:"px-4 py-3 bg-cyan-500 text-white rounded-xl text-sm font-medium hover:bg-cyan-600 disabled:bg-gray-300 disabled:cursor-not-allowed whitespace-nowrap shrink-0",children:k?"발송중...":w?"✓ 완료":"발송"})]}),j&&!w&&s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx("input",{type:"text",value:f,onChange:e=>y(e.target.value.replace(/[^\d]/g,"").slice(0,6)),placeholder:"인증번호 6자리 입력",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",maxLength:6}),s.jsx("button",{type:"button",onClick:async()=>{if(f&&6===f.length){S(!0);try{await n(g.phoneNumber,f)?(v(!0),alert("인증이 완료되었습니다!")):alert("인증번호가 일치하지 않거나 만료되었습니다.")}catch(e){alert(`인증 확인 실패: ${e.message||"알 수 없는 오류"}`)}finally{S(!1)}}else alert("6자리 인증번호를 입력해주세요.")},disabled:!f||6!==f.length||X,className:"px-4 py-3 bg-green-500 text-white rounded-xl text-sm font-medium hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed whitespace-nowrap",children:X?"확인중...":"인증 확인"})]}),w&&s.jsxs("div",{className:"mt-2 text-xs text-green-600 flex items-center gap-1",children:[s.jsx("i",{className:"ri-checkbox-circle-fill"}),s.jsx("span",{children:"전화번호 인증이 완료되었습니다."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["이름 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:g.name,onChange:e=>b({...g,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"이름을 입력하세요"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["나이 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",required:!0,min:"19",max:"99",value:g.age,onChange:e=>b({...g,age:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"나이"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["성별 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{required:!0,value:g.gender,onChange:e=>b({...g,gender:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm pr-8",children:[s.jsx("option",{value:"",children:"성별을 선택하세요"}),s.jsx("option",{value:"male",children:"남성"}),s.jsx("option",{value:"female",children:"여성"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",required:!0,minLength:8,value:g.password,onChange:e=>b({...g,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"8자 이상 입력하세요"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 확인 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",required:!0,minLength:8,value:g.confirmPassword,onChange:e=>b({...g,confirmPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm",placeholder:"비밀번호를 다시 입력하세요"})]}),s.jsxs("label",{className:"flex items-start cursor-pointer text-sm",children:[s.jsx("input",{type:"checkbox",className:"mt-1 mr-2"}),s.jsxs("span",{className:"text-gray-600",children:[s.jsx("button",{type:"button",onClick:()=>o("/policy/terms"),className:"text-cyan-500 hover:underline",children:"이용약관"})," 및 ",s.jsx("button",{type:"button",onClick:()=>o("/policy/privacy"),className:"text-cyan-500 hover:underline",children:"개인정보처리방침"}),"에 동의합니다"]})]}),s.jsx("button",{type:"submit",disabled:p||!w,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white py-4 rounded-xl font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:p?"가입 중...":"회원가입"}),s.jsx("div",{className:"text-center mt-4 text-xs text-gray-500",children:s.jsx("p",{children:"정보까지 다 입력해야 회원가입이 완료됩니다"})})]})]}),s.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:s.jsxs("p",{children:["문제가 있으신가요?"," ",s.jsx("button",{onClick:()=>o("/support"),className:"text-cyan-500 hover:text-cyan-600 cursor-pointer whitespace-nowrap",children:"고객센터"})]})})]})})}export{o as default};
