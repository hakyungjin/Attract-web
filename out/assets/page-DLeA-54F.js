import{u as e,j as s,s as t}from"./index-D-HdNcYp.js";import{e as l,r as i}from"./vendor-DkI5JUVe.js";import{g as a}from"./avatarUtils-Jlyh85v5.js";import"./supabase-DEy9n1le.js";function r(){const r=l(),{user:n}=e(),[o,c]=i.useState(null),[d,m]=i.useState(!0),[x,h]=i.useState(0);i.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("user");let s=n?.id;if(!s&&e)try{s=JSON.parse(e).id}catch{}if(!s)return void r("/login");const{data:l,error:i}=await t.from("users").select("*").eq("id",s).single();if(i)return;l&&c({id:l.id,name:l.name||l.nickname||"익명",age:l.age||0,gender:l.gender||"",location:l.location||"",school:l.school||"",mbti:l.mbti||"",character:l.character||"",bio:l.bio||"",photos:l.photos||[],profile_image:l.profile_image||"",interests:l.interests||[],height:l.height||"",bodyType:l.body_type||l.bodyType||"",style:l.style||"",religion:l.religion||"",smoking:l.smoking||"",drinking:l.drinking||""})}catch(e){}finally{m(!1)}})()},[n?.id,r]);const b=(()=>{const e=[];return o?.profile_image&&e.push(o.profile_image),o?.photos&&Array.isArray(o.photos)&&o.photos.forEach(s=>{s&&!e.includes(s)&&e.push(s)}),0===e.length?[a(o?.gender||"")]:e})(),u=()=>{r("/profile-edit")},p="from-cyan-400 to-blue-500",g="cyan";if(d)return s.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-cyan-500 border-t-transparent"})});if(!o)return s.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"프로필을 불러올 수 없습니다"}),s.jsx("button",{onClick:()=>r("/home"),className:"bg-cyan-500 text-white px-6 py-2 rounded-full",children:"홈으로"})]})});const f={height:o.height||"-",bodyType:o.bodyType||"-",style:o.style||"-",religion:o.religion||"-",smoking:o.smoking||"-",drinking:o.drinking||"-"},j=o.interests||[];return s.jsxs("div",{className:"min-h-screen bg-slate-100",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-4",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},children:[s.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),r(-1)},className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:s.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),s.jsx("button",{onClick:u,className:"w-11 h-11 bg-black/30 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-black/50 transition-all cursor-pointer",children:s.jsx("i",{className:"ri-edit-line text-white text-xl"})})]}),s.jsxs("div",{className:"relative w-full aspect-[3/4] max-h-[70vh] bg-slate-200 overflow-hidden",children:[s.jsx("img",{src:b[x],alt:`${o.name}`,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),s.jsx("button",{onClick:()=>{h(e=>0===e?b.length-1:e-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:s.jsx("i",{className:"ri-arrow-left-s-line text-white text-2xl"})}),s.jsx("button",{onClick:()=>{h(e=>e===b.length-1?0:e+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-lg z-10",children:s.jsx("i",{className:"ri-arrow-right-s-line text-white text-2xl"})}),b.length>1&&s.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 flex space-x-2 z-10",children:b.map((e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),h(t)},className:"w-2 h-2 rounded-full transition-all cursor-pointer shadow-sm "+(t===x?"bg-white w-4":"bg-white/50 hover:bg-white/80")},t))}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-10",children:s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-1 drop-shadow-lg",children:[o.name,", ",o.age||"??"]}),s.jsxs("p",{className:"text-white/90 flex items-center drop-shadow-md",children:[s.jsx("i",{className:"ri-map-pin-line mr-1"}),o.location||"위치 미설정"]})]}),o.mbti&&s.jsx("div",{className:`bg-gradient-to-r ${p} px-4 py-2 rounded-full shadow-lg`,children:s.jsx("span",{className:"text-white font-bold",children:o.mbti})})]})})]})]}),s.jsxs("div",{className:"px-4 py-6 space-y-4 pb-8",children:[s.jsx("div",{className:`bg-gradient-to-r ${p} rounded-2xl px-4 py-3`,children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-white",children:[s.jsx("i",{className:"ri-eye-line"}),s.jsx("span",{className:"text-sm font-medium",children:"다른 사람에게 보이는 내 프로필입니다"})]})}),o.bio&&s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-slate-800 mb-3 flex items-center",children:[s.jsx("i",{className:"ri-chat-quote-line mr-2 text-cyan-500"}),"자기소개"]}),s.jsx("p",{className:"text-slate-600 leading-relaxed",children:o.bio})]}),j.length>0&&s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[s.jsx("i",{className:`ri-heart-3-line mr-2 text-${g}-500`}),"관심사"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((e,t)=>s.jsx("span",{className:`bg-${g}-50 text-${g}-600 px-4 py-2 rounded-full text-sm font-medium`,children:e},t))})]}),s.jsx("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm",children:s.jsx("div",{className:"grid grid-cols-2",children:[{icon:"ri-ruler-line",label:"키",value:f.height},{icon:"ri-body-scan-line",label:"체형",value:f.bodyType},{icon:"ri-t-shirt-line",label:"스타일",value:f.style},{icon:"ri-moon-line",label:"종교",value:f.religion},{icon:"ri-fire-line",label:"흡연",value:f.smoking},{icon:"ri-goblet-line",label:"음주",value:f.drinking}].map((e,t)=>s.jsxs("div",{className:`p-4 ${t%2==0?"border-r border-slate-100":""} ${t<4?"border-b border-slate-100":""}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("i",{className:`${e.icon} text-slate-400`}),s.jsx("span",{className:"text-xs text-slate-400",children:e.label})]}),s.jsx("span",{className:"font-semibold "+(e.value&&"-"!==e.value?"text-slate-700":"text-slate-300"),children:e.value||"-"})]},t))})}),s.jsxs("button",{onClick:u,className:`w-full bg-gradient-to-r ${p} text-white py-4 rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all cursor-pointer flex items-center justify-center space-x-2`,children:[s.jsx("i",{className:"ri-edit-line"}),s.jsx("span",{children:"프로필 수정하기"})]})]})]})}export{r as default};
